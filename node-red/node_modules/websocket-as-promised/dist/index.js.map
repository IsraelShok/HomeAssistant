{"version":3,"sources":["webpack://WebSocketAsPromised/webpack/universalModuleDefinition","webpack://WebSocketAsPromised/webpack/bootstrap","webpack://WebSocketAsPromised/./node_modules/function-bind/index.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/requirePromise.js","webpack://WebSocketAsPromised/./node_modules/has/src/index.js","webpack://WebSocketAsPromised/./node_modules/is-callable/index.js","webpack://WebSocketAsPromised/./node_modules/promise-controller/lib/bundle.prod.js","webpack://WebSocketAsPromised/./node_modules/define-properties/index.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/implementation.js","webpack://WebSocketAsPromised/./node_modules/es-to-primitive/helpers/isPrimitive.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/helpers/isNaN.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/helpers/isFinite.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/helpers/assign.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/helpers/sign.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/helpers/mod.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/polyfill.js","webpack://WebSocketAsPromised/./src/index.js","webpack://WebSocketAsPromised/./node_modules/chnl/dist/bundle.umd.js","webpack://WebSocketAsPromised/./node_modules/flat-options/lib/index.js","webpack://WebSocketAsPromised/./src/requests.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/index.js","webpack://WebSocketAsPromised/./node_modules/function-bind/implementation.js","webpack://WebSocketAsPromised/./node_modules/object-keys/index.js","webpack://WebSocketAsPromised/./node_modules/object-keys/isArguments.js","webpack://WebSocketAsPromised/./node_modules/foreach/index.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/es7.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/es2016.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/es2015.js","webpack://WebSocketAsPromised/./node_modules/es-to-primitive/es6.js","webpack://WebSocketAsPromised/./node_modules/is-date-object/index.js","webpack://WebSocketAsPromised/./node_modules/is-symbol/index.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/helpers/isPrimitive.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/node_modules/es-abstract/es5.js","webpack://WebSocketAsPromised/./node_modules/es-to-primitive/es5.js","webpack://WebSocketAsPromised/./node_modules/is-regex/index.js","webpack://WebSocketAsPromised/./node_modules/promise.prototype.finally/shim.js","webpack://WebSocketAsPromised/./src/options.js","webpack://WebSocketAsPromised/./src/utils.js"],"names":["Channel","require","PromiseController","flatOptions","Requests","defaultOptions","throwIf","STATE","CONNECTING","OPEN","CLOSING","CLOSED","WebSocketAsPromised","url","options","_url","_options","_requests","_ws","_wsSubscription","_createOpeningController","_createClosingController","_createChannels","isClosing","Promise","reject","Error","isOpened","_opening","promise","call","e","_cleanup","_createWS","data","requestId","Math","random","timeout","undefined","create","_assertRequestIdHandlers","finalData","attachRequestId","sendPacked","_assertPackingHandlers","message","packMessage","send","_onSend","dispatchAsync","isClosed","resolve","_closing","value","close","_onOpen","removeAllListeners","_onMessage","_onUnpackedMessage","_onResponse","_onClose","_onError","connectionTimeout","timeoutReason","closingTimeout","createWebSocket","Subscription","channel","event","listener","_handleOpen","_handleMessage","_handleError","_handleClose","on","extractMessageData","_tryUnpack","unpackMessage","_tryHandleResponse","extractRequestId","error","reason","code","isPending","off","_cleanupWS","rejectAll","Boolean","readyState","join","module","exports","promiseFinally","_items","Map","fn","_rejectExistingRequest","_createNewRequest","has","get","forEach","request","existingRequest","set","_deleteRequest","WebSocket","condition"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;AClFa;;AAEb,qBAAqB,mBAAO,CAAC,EAAkB;;AAE/C;;;;;;;;ACJa;;AAEb;AACA;AACA;AACA;AACA;;;;;;;ACNA,WAAW,mBAAO,CAAC,CAAe;;AAElC;;;;;;;;ACFa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,EAAE;AACtE;AACA,EAAE;AACF,eAAe;AACf;AACA;;AAEA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,cAAc;AAC5B,gEAAgE,cAAc;AAC9E,sBAAsB,iCAAiC;AACvD,2BAA2B,cAAc;AACzC;AACA;AACA;;;;;;;ACtCA,eAAe,KAAiD,oBAAoB,SAAiI,CAAC,iBAAiB,mBAAmB,SAAS,cAAc,4BAA4B,YAAY,qBAAqB,2DAA2D,uCAAuC,qCAAqC,oBAAoB,EAAE,iBAAiB,4FAA4F,eAAe,wCAAwC,SAAS,EAAE,mBAAmB,8BAA8B,qDAAqD,0BAA0B,6CAA6C,sBAAsB,6DAA6D,YAAY,eAAe,SAAS,iBAAiB,iCAAiC,iBAAiB,YAAY,UAAU,sBAAsB,mBAAmB,iDAAiD,iBAAiB,kBAAkB,aAAa,iBAAiB,gBAAgB,YAAY,WAAW,KAAK,WAAW,+GAA+G,uBAAuB,wCAAwC,GAAG,6EAA6E,cAAc,eAAe,8EAA8E,uCAAuC,8JAA8J,aAAa,6BAA6B,gHAAgH,EAAE,gCAAgC,6GAA6G,EAAE,+BAA+B,wEAAwE,EAAE,6BAA6B,oBAAoB,yDAAyD,eAAe,sHAAsH,EAAE,kCAAkC,gCAAgC,EAAE,sCAAsC,WAAW,wCAAwC,yCAAyC,GAAG,EAAE,sCAAsC,sEAAsE,QAAQ,oDAAoD,gBAAgB,EAAE,oCAAoC,WAAW,0DAA0D,0BAA0B,0BAA0B,EAAE,mCAAmC,2DAA2D,EAAE,gCAAgC,qDAAqD,EAAE,gCAAgC,4BAA4B,UAAU,4BAA4B,SAAS,iBAAiB,EAAE,4CAA4C,WAAW,yBAAyB,oBAAoB,aAAa,mBAAmB,GAAG,EAAE,6BAA6B,sBAAsB,EAAE,2BAA2B,oBAAoB,EAAE,+BAA+B,wBAAwB,EAAE,iCAAiC,0BAA0B,EAAE,gCAAgC,yBAAyB,EAAE,+BAA+B,4CAA4C,KAAK,GAAG,0EAA0E,iBAAiB,aAAa,WAAW,wEAAwE,QAAQ,kEAAkE,iBAAiB,aAAa,wBAAwB,oCAAoC,uBAAuB,iCAAiC,+BAA+B,cAAc,mHAAmH,6EAA6E,GAAG,E;;;;;;;ACAl2I;;AAEb,WAAW,mBAAO,CAAC,EAAa;AAChC,cAAc,mBAAO,CAAC,EAAS;AAC/B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,gCAAgC;AACnE;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA,EAAE,YAAY;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;;;;;;;;ACvDa;;AAEb,qBAAqB,mBAAO,CAAC,CAAkB;;AAE/C;;AAEA,SAAS,mBAAO,CAAC,EAAiB;AAClC,WAAW,mBAAO,CAAC,CAAe;;AAElC;AACA;AACA;AACA,EAAE;AACF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,mCAAmC,EAAE,sCAAsC;;AAE3E,yDAAyD;;AAEzD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD,uCAAuC;AACxF;AACA;;AAEA;;;;;;;ACnEA;AACA;AACA;;;;;;;ACFA;AACA;AACA;;;;;;;ACFA,2CAA2C,gBAAgB;;AAE3D,kDAAkD,iFAAiF;;;;;;;ACFnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;;;;;;;ACFA;AACA;AACA;AACA;;;;;;;;ACHa;;AAEb,qBAAqB,mBAAO,CAAC,CAAkB;;AAE/C,qBAAqB,mBAAO,CAAC,CAAkB;;AAE/C;AACA;AACA;AACA;;;;;;;;;;;;;ACTA;;;;AAIA;;;AAIA,IAAMA,OAAO,GAAGC,mBAAO,CAAC,EAAD,CAAvB;;AACA,IAAMC,iBAAiB,GAAGD,mBAAO,CAAC,CAAD,CAAjC;;AACA,IAAME,WAAW,GAAGF,mBAAO,CAAC,EAAD,CAA3B;;AACA,IAAMG,QAAQ,GAAGH,mBAAO,CAAC,EAAD,CAAxB;;AACA,IAAMI,cAAc,GAAGJ,mBAAO,CAAC,EAAD,CAA9B;;eACkBA,mBAAO,CAAC,EAAD,C;IAAlBK,O,YAAAA,O,EAEP;;;AACA,IAAMC,KAAK,GAAG;AACZC,YAAU,EAAE,CADA;AAEZC,MAAI,EAAE,CAFM;AAGZC,SAAO,EAAE,CAHG;AAIZC,QAAM,EAAE;AAJI,CAAd;AAOA;;;;IAGMC,mB;;;AACJ;;;;;;;AAOA,+BAAYC,GAAZ,EAAiBC,OAAjB,EAA0B;AAAA;;AACxB,SAAKC,IAAL,GAAYF,GAAZ;AACA,SAAKG,QAAL,GAAgBb,WAAW,CAACW,OAAD,EAAUT,cAAV,CAA3B;AACA,SAAKY,SAAL,GAAiB,IAAIb,QAAJ,EAAjB;AACA,SAAKc,GAAL,GAAW,IAAX;AACA,SAAKC,eAAL,GAAuB,IAAvB;;AACA,SAAKC,wBAAL;;AACA,SAAKC,wBAAL;;AACA,SAAKC,eAAL;AACD;AAED;;;;;;;;;;AAkJA;;;;;2BAKO;AAAA;;AACL,UAAI,KAAKC,SAAT,EAAoB;AAClB,eAAOC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,uCAAf,CAAP;AACD;;AACD,UAAI,KAAKC,QAAT,EAAmB;AACjB,eAAO,KAAKC,QAAL,CAAcC,OAArB;AACD;;AACD,aAAO,KAAKD,QAAL,CAAcE,IAAd,CAAmB,YAAM;AAC9B,aAAI,CAACF,QAAL,CAAcC,OAAd,UAA4B,UAAAE,CAAC;AAAA,iBAAI,KAAI,CAACC,QAAL,CAAcD,CAAd,CAAJ;AAAA,SAA7B;;AACA,aAAI,CAACE,SAAL;AACD,OAHM,CAAP;AAID;AAED;;;;;;;;;;;;gCASYC,I,EAAoB;AAAA;;AAAA,UAAdpB,OAAc,uEAAJ,EAAI;AAC9B,UAAMqB,SAAS,GAAGrB,OAAO,CAACqB,SAAR,cAAwBC,IAAI,CAACC,MAAL,EAAxB,CAAlB;AACA,UAAMC,OAAO,GAAGxB,OAAO,CAACwB,OAAR,KAAoBC,SAApB,GAAgCzB,OAAO,CAACwB,OAAxC,GAAkD,KAAKtB,QAAL,CAAcsB,OAAhF;AACA,aAAO,KAAKrB,SAAL,CAAeuB,MAAf,CAAsBL,SAAtB,EAAiC,YAAM;AAC5C,cAAI,CAACM,wBAAL;;AACA,YAAMC,SAAS,GAAG,MAAI,CAAC1B,QAAL,CAAc2B,eAAd,CAA8BT,IAA9B,EAAoCC,SAApC,CAAlB;;AACA,cAAI,CAACS,UAAL,CAAgBF,SAAhB;AACD,OAJM,EAIJJ,OAJI,CAAP;AAKD;AAED;;;;;;;;+BAKWJ,I,EAAM;AACf,WAAKW,sBAAL;;AACA,UAAMC,OAAO,GAAG,KAAK9B,QAAL,CAAc+B,WAAd,CAA0Bb,IAA1B,CAAhB;;AACA,WAAKc,IAAL,CAAUF,OAAV;AACD;AAED;;;;;;;;yBAKKZ,I,EAAM;AACT5B,aAAO,CAAC,CAAC,KAAKqB,QAAP,qDAAP;;AACA,WAAKT,GAAL,CAAS8B,IAAT,CAAcd,IAAd;;AACA,WAAKe,OAAL,CAAaC,aAAb,CAA2BhB,IAA3B;AACD;AAED;;;;;;;;4BAKQ;AAAA;;AACN,aAAO,KAAKiB,QAAL,GACH3B,OAAO,CAAC4B,OAAR,CAAgB,KAAKC,QAAL,CAAcC,KAA9B,CADG,GAEH,KAAKD,QAAL,CAAcvB,IAAd,CAAmB;AAAA,eAAM,MAAI,CAACZ,GAAL,CAASqC,KAAT,EAAN;AAAA,OAAnB,CAFJ;AAGD;AAED;;;;;;yCAGqB;AACnB,WAAKC,OAAL,CAAaC,kBAAb;;AACA,WAAKC,UAAL,CAAgBD,kBAAhB;;AACA,WAAKE,kBAAL,CAAwBF,kBAAxB;;AACA,WAAKG,WAAL,CAAiBH,kBAAjB;;AACA,WAAKR,OAAL,CAAaQ,kBAAb;;AACA,WAAKI,QAAL,CAAcJ,kBAAd;;AACA,WAAKK,QAAL,CAAcL,kBAAd;AACD;;;+CAE0B;AACzB,UAAMM,iBAAiB,GAAG,KAAK/C,QAAL,CAAc+C,iBAAd,IAAmC,KAAK/C,QAAL,CAAcsB,OAA3E;AACA,WAAKV,QAAL,GAAgB,IAAI1B,iBAAJ,CAAsB;AACpCoC,eAAO,EAAEyB,iBAD2B;AAEpCC,qBAAa,yDAAkDD,iBAAlD;AAFuB,OAAtB,CAAhB;AAID;;;+CAE0B;AACzB,UAAME,cAAc,GAAG,KAAKjD,QAAL,CAAcsB,OAArC;AACA,WAAKe,QAAL,GAAgB,IAAInD,iBAAJ,CAAsB;AACpCoC,eAAO,EAAE2B,cAD2B;AAEpCD,qBAAa,0DAAmDC,cAAnD;AAFuB,OAAtB,CAAhB;AAID;;;sCAEiB;AAChB,WAAKT,OAAL,GAAe,IAAIxD,OAAJ,EAAf;AACA,WAAK0D,UAAL,GAAkB,IAAI1D,OAAJ,EAAlB;AACA,WAAK2D,kBAAL,GAA0B,IAAI3D,OAAJ,EAA1B;AACA,WAAK4D,WAAL,GAAmB,IAAI5D,OAAJ,EAAnB;AACA,WAAKiD,OAAL,GAAe,IAAIjD,OAAJ,EAAf;AACA,WAAK6D,QAAL,GAAgB,IAAI7D,OAAJ,EAAhB;AACA,WAAK8D,QAAL,GAAgB,IAAI9D,OAAJ,EAAhB;AACD;;;gCAEW;AAAA;;AACV,WAAKkB,GAAL,GAAW,KAAKF,QAAL,CAAckD,eAAd,CAA8B,KAAKnD,IAAnC,CAAX;AACA,WAAKI,eAAL,GAAuB,IAAInB,OAAO,CAACmE,YAAZ,CAAyB,CAC9C;AAACC,eAAO,EAAE,KAAKlD,GAAf;AAAoBmD,aAAK,EAAE,MAA3B;AAAmCC,gBAAQ,EAAE,kBAAAvC,CAAC;AAAA,iBAAI,MAAI,CAACwC,WAAL,CAAiBxC,CAAjB,CAAJ;AAAA;AAA9C,OAD8C,EAE9C;AAACqC,eAAO,EAAE,KAAKlD,GAAf;AAAoBmD,aAAK,EAAE,SAA3B;AAAsCC,gBAAQ,EAAE,kBAAAvC,CAAC;AAAA,iBAAI,MAAI,CAACyC,cAAL,CAAoBzC,CAApB,CAAJ;AAAA;AAAjD,OAF8C,EAG9C;AAACqC,eAAO,EAAE,KAAKlD,GAAf;AAAoBmD,aAAK,EAAE,OAA3B;AAAoCC,gBAAQ,EAAE,kBAAAvC,CAAC;AAAA,iBAAI,MAAI,CAAC0C,YAAL,CAAkB1C,CAAlB,CAAJ;AAAA;AAA/C,OAH8C,EAI9C;AAACqC,eAAO,EAAE,KAAKlD,GAAf;AAAoBmD,aAAK,EAAE,OAA3B;AAAoCC,gBAAQ,EAAE,kBAAAvC,CAAC;AAAA,iBAAI,MAAI,CAAC2C,YAAL,CAAkB3C,CAAlB,CAAJ;AAAA;AAA/C,OAJ8C,CAAzB,EAKpB4C,EALoB,EAAvB;AAMD;;;gCAEWN,K,EAAO;AACjB,WAAKb,OAAL,CAAaN,aAAb,CAA2BmB,KAA3B;;AACA,WAAKzC,QAAL,CAAcwB,OAAd,CAAsBiB,KAAtB;AACD;;;mCAEcA,K,EAAO;AACpB,UAAMnC,IAAI,GAAG,KAAKlB,QAAL,CAAc4D,kBAAd,CAAiCP,KAAjC,CAAb;;AACA,WAAKX,UAAL,CAAgBR,aAAhB,CAA8BhB,IAA9B;;AACA,WAAK2C,UAAL,CAAgB3C,IAAhB;AACD;;;+BAEUA,I,EAAM;AACf,UAAI,KAAKlB,QAAL,CAAc8D,aAAlB,EAAiC;AAC/B5C,YAAI,GAAG,KAAKlB,QAAL,CAAc8D,aAAd,CAA4B5C,IAA5B,CAAP;;AACA,YAAIA,IAAI,KAAKK,SAAb,EAAwB;AACtB,eAAKoB,kBAAL,CAAwBT,aAAxB,CAAsChB,IAAtC;;AACA,eAAK6C,kBAAL,CAAwB7C,IAAxB;AACD;AACF;AACF;;;uCAEkBA,I,EAAM;AACvB,UAAI,KAAKlB,QAAL,CAAcgE,gBAAlB,EAAoC;AAClC,YAAM7C,SAAS,GAAG,KAAKnB,QAAL,CAAcgE,gBAAd,CAA+B9C,IAA/B,CAAlB;;AACA,YAAIC,SAAJ,EAAe;AACb,eAAKyB,WAAL,CAAiBV,aAAjB,CAA+BhB,IAA/B,EAAqCC,SAArC;;AACA,eAAKlB,SAAL,CAAemC,OAAf,CAAuBjB,SAAvB,EAAkCD,IAAlC;AACD;AACF;AACF;;;iCAEYmC,K,EAAO;AAClB,WAAKP,QAAL,CAAcZ,aAAd,CAA4BmB,KAA5B;AACD;;;iCAEYA,K,EAAO;AAClB,WAAKR,QAAL,CAAcX,aAAd,CAA4BmB,KAA5B;;AACA,WAAKhB,QAAL,CAAcD,OAAd,CAAsBiB,KAAtB;;AACA,UAAMY,KAAK,GAAG,IAAIvD,KAAJ,yCAA2C2C,KAAK,CAACa,MAAjD,eAA4Db,KAAK,CAACc,IAAlE,QAAd;;AACA,UAAI,KAAKvD,QAAL,CAAcwD,SAAlB,EAA6B;AAC3B,aAAKxD,QAAL,CAAcH,MAAd,CAAqBwD,KAArB;AACD;;AACD,WAAKjD,QAAL,CAAciD,KAAd;AACD;;;iCAEY;AACX,UAAI,KAAK9D,eAAT,EAA0B;AACxB,aAAKA,eAAL,CAAqBkE,GAArB;;AACA,aAAKlE,eAAL,GAAuB,IAAvB;AACD;;AACD,WAAKD,GAAL,GAAW,IAAX;AACD;;;6BAEQ+D,K,EAAO;AACd,WAAKK,UAAL;;AACA,WAAKrE,SAAL,CAAesE,SAAf,CAAyBN,KAAzB;AACD;;;6CAEwB;AAAA,2BACc,KAAKjE,QADnB;AAAA,UAChB+B,WADgB,kBAChBA,WADgB;AAAA,UACH+B,aADG,kBACHA,aADG;AAEvBxE,aAAO,CAAC,CAACyC,WAAD,IAAgB,CAAC+B,aAAlB,6FAAP;AAGD;;;+CAE0B;AAAA,4BACmB,KAAK9D,QADxB;AAAA,UAClB2B,eADkB,mBAClBA,eADkB;AAAA,UACDqC,gBADC,mBACDA,gBADC;AAEzB1E,aAAO,CAAC,CAACqC,eAAD,IAAoB,CAACqC,gBAAtB,6FAAP;AAGD;;;wBA1UQ;AACP,aAAO,KAAK9D,GAAZ;AACD;AAED;;;;;;;;wBAKgB;AACd,aAAOsE,OAAO,CAAC,KAAKtE,GAAL,IAAY,KAAKA,GAAL,CAASuE,UAAT,KAAwBlF,KAAK,CAACC,UAA3C,CAAd;AACD;AAED;;;;;;;;wBAKe;AACb,aAAOgF,OAAO,CAAC,KAAKtE,GAAL,IAAY,KAAKA,GAAL,CAASuE,UAAT,KAAwBlF,KAAK,CAACE,IAA3C,CAAd;AACD;AAED;;;;;;;;wBAKgB;AACd,aAAO+E,OAAO,CAAC,KAAKtE,GAAL,IAAY,KAAKA,GAAL,CAASuE,UAAT,KAAwBlF,KAAK,CAACG,OAA3C,CAAd;AACD;AAED;;;;;;;;wBAKe;AACb,aAAO8E,OAAO,CAAC,CAAC,KAAKtE,GAAN,IAAa,KAAKA,GAAL,CAASuE,UAAT,KAAwBlF,KAAK,CAACI,MAA5C,CAAd;AACD;AAED;;;;;;;;;;;;wBASa;AACX,aAAO,KAAK6C,OAAZ;AACD;AAED;;;;;;;;;;;;wBASa;AACX,aAAO,KAAKP,OAAZ;AACD;AAED;;;;;;;;;;;;wBASgB;AACd,aAAO,KAAKS,UAAZ;AACD;;;wBAEqB;AACpB,YAAM,IAAIhC,KAAJ,CAAU,+KAGdgE,IAHc,CAGT,GAHS,CAAV,CAAN;AAID;AAED;;;;;;;;;;;;;wBAUwB;AACtB,aAAO,KAAK/B,kBAAZ;AACD;AAED;;;;;;;;;;;;;wBAUiB;AACf,aAAO,KAAKC,WAAZ;AACD;AAED;;;;;;;;;;;;;wBAUc;AACZ,aAAO,KAAKC,QAAZ;AACD;AAED;;;;;;;;;;;;wBASc;AACZ,aAAO,KAAKC,QAAZ;AACD;;;;;;AAkMH6B,MAAM,CAACC,OAAP,GAAiBhF,mBAAjB,C;;;;;;AC/XA;AACA;AACA,EAAE,KAA4D;AAC9D,EAAE,SACqD;AACvD,CAAC,oBAAoB;;AAErB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB,mBAAmB;AACnB;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA,2EAA2E,aAAa;AACxF;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA,8EAA8E,eAAe;AAC7F;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,QAAQ;AACzB;;AAEA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,MAAM;AACvB,iBAAiB,QAAQ;AACzB;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,OAAO;AACxB,iBAAiB,MAAM;AACvB,iBAAiB,QAAQ;AACzB;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;AACA;;AAEA,KAAK;AACL;AACA;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB,iBAAiB,QAAQ;AACzB;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB,mBAAmB;AACnB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,SAAS;AAC1B,iBAAiB,OAAO;AACxB,mBAAmB;AACnB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,EAAE;AACnB;;AAEA,KAAK;AACL;AACA;AACA;;AAEA,8FAA8F,aAAa;AAC3G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,iBAAiB,EAAE;AACnB;;AAEA,KAAK;AACL;AACA;AACA,kGAAkG,eAAe;AACjH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,mBAAmB;AACnB;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,OAAO,yBAAyB,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;AAGA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,aAAa,eAAe;AAC5B,aAAa,OAAO,yBAAyB,EAAE;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AAC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;;;;;;;;ACjBa;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;;AAEA,8EAA8E,qCAAqC,EAAE;;AAErH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACnDa;;AAEb;AACA;AACA;AACA;AACA,aAAa,mBAAO,CAAC,EAAe;AACpC;AACA,yCAAyC,iBAAiB;AAC1D,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,cAAc;AACnD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;;AAEA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;;;;;;;;AC3Ia;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACfA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACpBa;;AAEb,iBAAiB,mBAAO,CAAC,EAAU;;;;;;;;ACFtB;;AAEb,aAAa,mBAAO,CAAC,EAAU;AAC/B,aAAa,mBAAO,CAAC,EAAkB;;AAEvC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;ACfa;;AAEb,UAAU,mBAAO,CAAC,CAAK;AACvB,kBAAkB,mBAAO,CAAC,EAAqB;;AAE/C;AACA;;AAEA,aAAa,mBAAO,CAAC,CAAiB;AACtC,gBAAgB,mBAAO,CAAC,CAAoB;AAC5C;;AAEA,aAAa,mBAAO,CAAC,EAAkB;AACvC,WAAW,mBAAO,CAAC,EAAgB;AACnC,UAAU,mBAAO,CAAC,EAAe;AACjC,kBAAkB,mBAAO,CAAC,EAAuB;AACjD;AACA,WAAW,mBAAO,CAAC,CAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAU,mBAAO,CAAC,EAAO;;AAEzB,uBAAuB,mBAAO,CAAC,EAAU;;AAEzC;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,6DAA6D,UAAU;AACvE;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,sCAAsC,UAAU;AAChD,uBAAuB,aAAa;AACpC;AACA,yBAAyB,cAAc;AACvC,yBAAyB,UAAU;AACnC,oBAAoB,cAAc;AAClC;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,iBAAiB,UAAU,EAAE;AAC7B,+BAA+B,yBAAyB;AACxD;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC;AACA,mDAAmD,UAAU;AAC7D;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,gEAAgE;AAChE,EAAE;;AAEF;AACA;AACA,kCAAkC,aAAa;AAC/C;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,gCAAgC;;AAEhC;;;;;;;;ACpjBa;;AAEb;;AAEA,kBAAkB,mBAAO,CAAC,CAAuB;AACjD,iBAAiB,mBAAO,CAAC,CAAa;AACtC,aAAa,mBAAO,CAAC,EAAgB;AACrC,eAAe,mBAAO,CAAC,EAAW;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wBAAwB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzEa;;AAEb;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mDAAmD,cAAc;AACjE;AACA;;;;;;;;ACnBa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D;AACA;AACA;AACA,kCAAkC,aAAa;AAC/C,gDAAgD,cAAc;AAC9D;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;;;;;;AC1BA;AACA;AACA;;;;;;;;ACFa;;AAEb,aAAa,mBAAO,CAAC,CAAiB;AACtC,gBAAgB,mBAAO,CAAC,CAAoB;;AAE5C,WAAW,mBAAO,CAAC,EAAgB;AACnC,UAAU,mBAAO,CAAC,EAAe;;AAEjC,iBAAiB,mBAAO,CAAC,CAAa;AACtC,kBAAkB,mBAAO,CAAC,EAAqB;;AAE/C,UAAU,mBAAO,CAAC,CAAK;;AAEvB;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,uBAAuB,UAAU;AACjC,2CAA2C,eAAe;AAC1D;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,6DAA6D,UAAU;AACvE;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,gBAAgB;AAChB,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC3Oa;;AAEb;;AAEA,kBAAkB,mBAAO,CAAC,CAAuB;;AAEjD,iBAAiB,mBAAO,CAAC,CAAa;;AAEtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpCa;;AAEb,UAAU,mBAAO,CAAC,CAAK;AACvB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACtCa;;AAEb,qBAAqB,mBAAO,CAAC,CAAkB;;AAE/C,kBAAkB,mBAAO,CAAC,EAAY;AACtC,aAAa,mBAAO,CAAC,CAAmB;;AAExC;AACA;;AAEA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA,EAAE;AACF;AACA;;;;;;;ACjBA;;;;AAIA;;;;;;;;;;;;;;;;;;;;;;;AAwBAwD,MAAM,CAACC,OAAP,GAAiB;AACf;;;;;;AAMA1B,iBAAe,EAAE,yBAAArD,GAAG;AAAA,WAAI,IAAI6F,SAAJ,CAAc7F,GAAd,CAAJ;AAAA,GAPL;;AASf;;;;;;AAMAkC,aAAW,EAAE,IAfE;;AAiBf;;;;;;AAMA+B,eAAa,EAAE,IAvBA;;AAyBf;;;;;;;AAOAnC,iBAAe,EAAE,IAhCF;;AAkCf;;;;;;AAMAqC,kBAAgB,EAAE,IAxCH;;AA0Cf;;;;;;AAMAJ,oBAAkB,EAAE,4BAAAP,KAAK;AAAA,WAAIA,KAAK,CAACnC,IAAV;AAAA,GAhDV;;AAkDf;;;AAGAI,SAAO,EAAE,CArDM;;AAuDf;;;AAGAyB,mBAAiB,EAAE;AA1DJ,CAAjB,C;;;;;;AC3BA6B,OAAO,CAACtF,OAAR,GAAkB,UAACqG,SAAD,EAAY7D,OAAZ,EAAwB;AACxC,MAAI6D,SAAJ,EAAe;AACb,UAAM,IAAIjF,KAAJ,CAAUoB,OAAV,CAAN;AACD;AACF,CAJD,C","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WebSocketAsPromised\"] = factory();\n\telse\n\t\troot[\"WebSocketAsPromised\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nmodule.exports = function requirePromise() {\n\tif (typeof Promise !== 'function') {\n\t\tthrow new TypeError('`Promise.prototype.finally` requires a global `Promise` be available.');\n\t}\n};\n","var bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\n\nvar constructorRegex = /^\\s*class /;\nvar isES6ClassFn = function isES6ClassFn(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\tvar singleStripped = fnStr.replace(/\\/\\/.*\\n/g, '');\n\t\tvar multiStripped = singleStripped.replace(/\\/\\*[.\\s\\S]*\\*\\//g, '');\n\t\tvar spaceStripped = multiStripped.replace(/\\n/mg, ' ').replace(/ {2}/g, ' ');\n\t\treturn constructorRegex.test(spaceStripped);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionObject(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isCallable(value) {\n\tif (!value) { return false; }\n\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\tif (hasToStringTag) { return tryFunctionObject(value); }\n\tif (isES6ClassFn(value)) { return false; }\n\tvar strClass = toStr.call(value);\n\treturn strClass === fnClass || strClass === genClass;\n};\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.PromiseController=t():e.PromiseController=t()}(this,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){\"use strict\";var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var n=i(1),o=i(2),s=o.isPromise,u=o.createErrorType,c=o.tryCall,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this._options=Object.assign({},n,t),this._resolve=null,this._reject=null,this._isPending=!1,this._isFulfilled=!1,this._isRejected=!1,this._value=void 0,this._promise=null,this._timer=null}return r(e,[{key:\"call\",value:function(e){return this._isPending||(this.reset(),this._createPromise(),this._createTimer(),this._callFn(e)),this._promise}},{key:\"resolve\",value:function(e){this._isPending&&(s(e)?this._tryAttachToPromise(e):(this._settle(e),this._isFulfilled=!0,this._resolve(e)))}},{key:\"reject\",value:function(e){this._isPending&&(this._settle(e),this._isRejected=!0,this._reject(e))}},{key:\"reset\",value:function(){if(this._isPending){var t=c(this._options.resetReason),i=new e.ResetError(t);this.reject(i)}this._promise=null,this._isPending=!1,this._isFulfilled=!1,this._isRejected=!1,this._value=void 0,this._clearTimer()}},{key:\"configure\",value:function(e){Object.assign(this._options,e)}},{key:\"_createPromise\",value:function(){var e=this;this._promise=new Promise(function(t,i){e._isPending=!0,e._resolve=t,e._reject=i})}},{key:\"_handleTimeout\",value:function(){var t=c(this._options.timeoutReason),i=\"string\"==typeof t?t.replace(\"{timeout}\",this._options.timeout):\"\",r=new e.TimeoutError(i);this.reject(r)}},{key:\"_createTimer\",value:function(){var e=this;this._options.timeout&&(this._timer=setTimeout(function(){return e._handleTimeout()},this._options.timeout))}},{key:\"_clearTimer\",value:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)}},{key:\"_settle\",value:function(e){this._isPending=!1,this._value=e,this._clearTimer()}},{key:\"_callFn\",value:function(e){if(\"function\"==typeof e)try{var t=e();this._tryAttachToPromise(t)}catch(e){this.reject(e)}}},{key:\"_tryAttachToPromise\",value:function(e){var t=this;s(e)&&e.then(function(e){return t.resolve(e)},function(e){return t.reject(e)})}},{key:\"promise\",get:function(){return this._promise}},{key:\"value\",get:function(){return this._value}},{key:\"isPending\",get:function(){return this._isPending}},{key:\"isFulfilled\",get:function(){return this._isFulfilled}},{key:\"isRejected\",get:function(){return this._isRejected}},{key:\"isSettled\",get:function(){return this._isFulfilled||this._isRejected}}]),e}();l.TimeoutError=u(\"TimeoutError\"),l.ResetError=u(\"ResetError\"),e.exports=l},function(e,t,i){\"use strict\";e.exports={timeout:0,timeoutReason:\"Promise rejected by PromiseController timeout {timeout} ms.\",resetReason:\"Promise rejected by PromiseController reset.\"}},function(e,t,i){\"use strict\";t.isPromise=function(e){return e&&\"function\"==typeof e.then},t.tryCall=function(e){return\"function\"==typeof e?e():e},t.createErrorType=function(e){function t(e){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e}return t.prototype=new Error,t.prototype.name=e,t.prototype.constructor=t,t}}])});","'use strict';\n\nvar keys = require('object-keys');\nvar foreach = require('foreach');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol() === 'symbol';\n\nvar toStr = Object.prototype.toString;\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar arePropertyDescriptorsSupported = function () {\n\tvar obj = {};\n\ttry {\n\t\tObject.defineProperty(obj, 'x', { enumerable: false, value: obj });\n        /* eslint-disable no-unused-vars, no-restricted-syntax */\n        for (var _ in obj) { return false; }\n        /* eslint-enable no-unused-vars, no-restricted-syntax */\n\t\treturn obj.x === obj;\n\t} catch (e) { /* this is IE 8. */\n\t\treturn false;\n\t}\n};\nvar supportsDescriptors = Object.defineProperty && arePropertyDescriptorsSupported();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object && (!isFunction(predicate) || !predicate())) {\n\t\treturn;\n\t}\n\tif (supportsDescriptors) {\n\t\tObject.defineProperty(object, name, {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: value,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\tobject[name] = value;\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = props.concat(Object.getOwnPropertySymbols(map));\n\t}\n\tforeach(props, function (name) {\n\t\tdefineProperty(object, name, map[name], predicates[name]);\n\t});\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar requirePromise = require('./requirePromise');\n\nrequirePromise();\n\nvar ES = require('es-abstract/es7');\nvar bind = require('function-bind');\n\nvar promiseResolve = function PromiseResolve(C, value) {\n\treturn new C(function (resolve) {\n\t\tresolve(value);\n\t});\n};\n\nvar OriginalPromise = Promise;\n\nvar createThenFinally = function CreateThenFinally(C, onFinally) {\n\treturn function (value) {\n\t\tvar result = onFinally();\n\t\tvar promise = promiseResolve(C, result);\n\t\tvar valueThunk = function () {\n\t\t\treturn value;\n\t\t};\n\t\treturn promise.then(valueThunk);\n\t};\n};\n\nvar createCatchFinally = function CreateCatchFinally(C, onFinally) {\n\treturn function (reason) {\n\t\tvar result = onFinally();\n\t\tvar promise = promiseResolve(C, result);\n\t\tvar thrower = function () {\n\t\t\tthrow reason;\n\t\t};\n\t\treturn promise.then(thrower);\n\t};\n};\n\nvar then = bind.call(Function.call, OriginalPromise.prototype.then);\n\nvar promiseFinally = function finally_(onFinally) {\n\t/* eslint no-invalid-this: 0 */\n\n\tvar promise = this;\n\n\tthen(promise, null, function () {}); // throw if IsPromise(this) is false; catch() to avoid unhandled rejection warnings\n\n\tvar C = ES.SpeciesConstructor(promise, OriginalPromise); // may throw\n\n\tvar thenFinally = onFinally;\n\tvar catchFinally = onFinally;\n\tif (ES.IsCallable(onFinally)) {\n\t\tthenFinally = createThenFinally(C, onFinally);\n\t\tcatchFinally = createCatchFinally(C, onFinally);\n\t}\n\n\treturn promise.then(thenFinally, catchFinally);\n};\n\nif (Object.getOwnPropertyDescriptor) {\n\tvar descriptor = Object.getOwnPropertyDescriptor(promiseFinally, 'name');\n\tif (descriptor && descriptor.configurable) {\n\t\tObject.defineProperty(promiseFinally, 'name', { configurable: true, value: 'finally' });\n\t}\n}\n\nmodule.exports = promiseFinally;\n","module.exports = function isPrimitive(value) {\n\treturn value === null || (typeof value !== 'function' && typeof value !== 'object');\n};\n","module.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n","var $isNaN = Number.isNaN || function (a) { return a !== a; };\n\nmodule.exports = Number.isFinite || function (x) { return typeof x === 'number' && !$isNaN(x) && x !== Infinity && x !== -Infinity; };\n","var has = Object.prototype.hasOwnProperty;\nmodule.exports = function assign(target, source) {\n\tif (Object.assign) {\n\t\treturn Object.assign(target, source);\n\t}\n\tfor (var key in source) {\n\t\tif (has.call(source, key)) {\n\t\t\ttarget[key] = source[key];\n\t\t}\n\t}\n\treturn target;\n};\n","module.exports = function sign(number) {\n\treturn number >= 0 ? 1 : -1;\n};\n","module.exports = function mod(number, modulo) {\n\tvar remain = number % modulo;\n\treturn Math.floor(remain >= 0 ? remain : remain + modulo);\n};\n","'use strict';\n\nvar requirePromise = require('./requirePromise');\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\trequirePromise();\n\treturn typeof Promise.prototype['finally'] === 'function' ? Promise.prototype['finally'] : implementation;\n};\n","/**\n * WebSocket with promise api\n */\n\n/**\n * @external Channel\n */\n\nconst Channel = require('chnl');\nconst PromiseController = require('promise-controller');\nconst flatOptions = require('flat-options');\nconst Requests = require('./requests');\nconst defaultOptions = require('./options');\nconst {throwIf} = require('./utils');\n\n// see: https://developer.mozilla.org/en-US/docs/Web/API/WebSocket#Ready_state_constants\nconst STATE = {\n  CONNECTING: 0,\n  OPEN: 1,\n  CLOSING: 2,\n  CLOSED: 3,\n};\n\n/**\n * @typicalname wsp\n */\nclass WebSocketAsPromised {\n  /**\n   * Constructor. Unlike original WebSocket it does not immediately open connection.\n   * Please call `open()` method to connect.\n   *\n   * @param {String} url WebSocket URL\n   * @param {Options} [options]\n   */\n  constructor(url, options) {\n    this._url = url;\n    this._options = flatOptions(options, defaultOptions);\n    this._requests = new Requests();\n    this._ws = null;\n    this._wsSubscription = null;\n    this._createOpeningController();\n    this._createClosingController();\n    this._createChannels();\n  }\n\n  /**\n   * Returns original WebSocket instance created by `options.createWebSocket`.\n   *\n   * @returns {WebSocket}\n   */\n  get ws() {\n    return this._ws;\n  }\n\n  /**\n   * Is WebSocket connection in opening state.\n   *\n   * @returns {Boolean}\n   */\n  get isOpening() {\n    return Boolean(this._ws && this._ws.readyState === STATE.CONNECTING);\n  }\n\n  /**\n   * Is WebSocket connection opened.\n   *\n   * @returns {Boolean}\n   */\n  get isOpened() {\n    return Boolean(this._ws && this._ws.readyState === STATE.OPEN);\n  }\n\n  /**\n   * Is WebSocket connection in closing state.\n   *\n   * @returns {Boolean}\n   */\n  get isClosing() {\n    return Boolean(this._ws && this._ws.readyState === STATE.CLOSING);\n  }\n\n  /**\n   * Is WebSocket connection closed.\n   *\n   * @returns {Boolean}\n   */\n  get isClosed() {\n    return Boolean(!this._ws || this._ws.readyState === STATE.CLOSED);\n  }\n\n  /**\n   * Event channel triggered when connection is opened.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onOpen.addListener(() => console.log('Connection opened'));\n   *\n   * @returns {Channel}\n   */\n  get onOpen() {\n    return this._onOpen;\n  }\n\n  /**\n   * Event channel triggered every time when message is sent to server.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onSend.addListener(data => console.log('Message sent', data));\n   *\n   * @returns {Channel}\n   */\n  get onSend() {\n    return this._onSend;\n  }\n\n  /**\n   * Event channel triggered every time when message received from server.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onMessage.addListener(message => console.log(message));\n   *\n   * @returns {Channel}\n   */\n  get onMessage() {\n    return this._onMessage;\n  }\n\n  get onPackedMessage() {\n    throw new Error([\n      `Websocket-as-promised 'onPackedMessage' was renamed into 'onUnpackedMessage' to match the argument`,\n      `passed to the listener. Please just use 'onUnpackedMessage' instead.`\n    ].join(' '));\n  }\n\n  /**\n   * Event channel triggered every time when received message is successfully unpacked.\n   * For example, if you are using JSON transport, the listener will receive already JSON parsed data.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onUnpackedMessage.addListener(data => console.log(data.foo));\n   *\n   * @returns {Channel}\n   */\n  get onUnpackedMessage() {\n    return this._onUnpackedMessage;\n  }\n\n  /**\n   * Event channel triggered every time when response to some request comes.\n   * Received message considered a response if requestId is found in it.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onResponse.addListener(data => console.log(data));\n   *\n   * @returns {Channel}\n   */\n  get onResponse() {\n    return this._onResponse;\n  }\n\n  /**\n   * Event channel triggered when connection closed.\n   * Listener accepts single argument `{code, reason}`.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onClose.addListener(event => console.log(`Connections closed: ${event.reason}`));\n   *\n   * @returns {Channel}\n   */\n  get onClose() {\n    return this._onClose;\n  }\n\n  /**\n   * Event channel triggered when by Websocket 'error' event.\n   *\n   * @see https://vitalets.github.io/chnl/#channel\n   * @example\n   * wsp.onError.addListener(event => console.error(event));\n   *\n   * @returns {Channel}\n   */\n  get onError() {\n    return this._onError;\n  }\n\n  /**\n   * Opens WebSocket connection. If connection already opened, promise will be resolved with \"open event\".\n   *\n   * @returns {Promise<Event>}\n   */\n  open() {\n    if (this.isClosing) {\n      return Promise.reject(new Error(`Can't open WebSocket while closing.`));\n    }\n    if (this.isOpened) {\n      return this._opening.promise;\n    }\n    return this._opening.call(() => {\n      this._opening.promise.catch(e => this._cleanup(e));\n      this._createWS();\n    });\n  }\n\n  /**\n   * Performs request and waits for response.\n   *\n   * @param {*} data\n   * @param {Object} [options]\n   * @param {String|Number} [options.requestId=<auto-generated>]\n   * @param {Number} [options.timeout=0]\n   * @returns {Promise}\n   */\n  sendRequest(data, options = {}) {\n    const requestId = options.requestId || `${Math.random()}`;\n    const timeout = options.timeout !== undefined ? options.timeout : this._options.timeout;\n    return this._requests.create(requestId, () => {\n      this._assertRequestIdHandlers();\n      const finalData = this._options.attachRequestId(data, requestId);\n      this.sendPacked(finalData);\n    }, timeout);\n  }\n\n  /**\n   * Packs data with `options.packMessage` and sends to the server.\n   *\n   * @param {*} data\n   */\n  sendPacked(data) {\n    this._assertPackingHandlers();\n    const message = this._options.packMessage(data);\n    this.send(message);\n  }\n\n  /**\n   * Sends data without packing.\n   *\n   * @param {String|Blob|ArrayBuffer} data\n   */\n  send(data) {\n    throwIf(!this.isOpened, `Can't send data because WebSocket is not opened.`);\n    this._ws.send(data);\n    this._onSend.dispatchAsync(data);\n  }\n\n  /**\n   * Closes WebSocket connection. If connection already closed, promise will be resolved with \"close event\".\n   *\n   * @returns {Promise<Event>}\n   */\n  close() {\n    return this.isClosed\n      ? Promise.resolve(this._closing.value)\n      : this._closing.call(() => this._ws.close());\n  }\n\n  /**\n   * Removes all listeners from WSP instance. Useful for cleanup.\n   */\n  removeAllListeners() {\n    this._onOpen.removeAllListeners();\n    this._onMessage.removeAllListeners();\n    this._onUnpackedMessage.removeAllListeners();\n    this._onResponse.removeAllListeners();\n    this._onSend.removeAllListeners();\n    this._onClose.removeAllListeners();\n    this._onError.removeAllListeners();\n  }\n\n  _createOpeningController() {\n    const connectionTimeout = this._options.connectionTimeout || this._options.timeout;\n    this._opening = new PromiseController({\n      timeout: connectionTimeout,\n      timeoutReason: `Can't open WebSocket within allowed timeout: ${connectionTimeout} ms.`\n    });\n  }\n\n  _createClosingController() {\n    const closingTimeout = this._options.timeout;\n    this._closing = new PromiseController({\n      timeout: closingTimeout,\n      timeoutReason: `Can't close WebSocket within allowed timeout: ${closingTimeout} ms.`\n    });\n  }\n\n  _createChannels() {\n    this._onOpen = new Channel();\n    this._onMessage = new Channel();\n    this._onUnpackedMessage = new Channel();\n    this._onResponse = new Channel();\n    this._onSend = new Channel();\n    this._onClose = new Channel();\n    this._onError = new Channel();\n  }\n\n  _createWS() {\n    this._ws = this._options.createWebSocket(this._url);\n    this._wsSubscription = new Channel.Subscription([\n      {channel: this._ws, event: 'open', listener: e => this._handleOpen(e)},\n      {channel: this._ws, event: 'message', listener: e => this._handleMessage(e)},\n      {channel: this._ws, event: 'error', listener: e => this._handleError(e)},\n      {channel: this._ws, event: 'close', listener: e => this._handleClose(e)},\n    ]).on();\n  }\n\n  _handleOpen(event) {\n    this._onOpen.dispatchAsync(event);\n    this._opening.resolve(event);\n  }\n\n  _handleMessage(event) {\n    const data = this._options.extractMessageData(event);\n    this._onMessage.dispatchAsync(data);\n    this._tryUnpack(data);\n  }\n\n  _tryUnpack(data) {\n    if (this._options.unpackMessage) {\n      data = this._options.unpackMessage(data);\n      if (data !== undefined) {\n        this._onUnpackedMessage.dispatchAsync(data);\n        this._tryHandleResponse(data);\n      }\n    }\n  }\n\n  _tryHandleResponse(data) {\n    if (this._options.extractRequestId) {\n      const requestId = this._options.extractRequestId(data);\n      if (requestId) {\n        this._onResponse.dispatchAsync(data, requestId);\n        this._requests.resolve(requestId, data);\n      }\n    }\n  }\n\n  _handleError(event) {\n    this._onError.dispatchAsync(event);\n  }\n\n  _handleClose(event) {\n    this._onClose.dispatchAsync(event);\n    this._closing.resolve(event);\n    const error = new Error(`WebSocket closed with reason: ${event.reason} (${event.code}).`);\n    if (this._opening.isPending) {\n      this._opening.reject(error);\n    }\n    this._cleanup(error);\n  }\n\n  _cleanupWS() {\n    if (this._wsSubscription) {\n      this._wsSubscription.off();\n      this._wsSubscription = null;\n    }\n    this._ws = null;\n  }\n\n  _cleanup(error) {\n    this._cleanupWS();\n    this._requests.rejectAll(error);\n  }\n\n  _assertPackingHandlers() {\n    const {packMessage, unpackMessage} = this._options;\n    throwIf(!packMessage || !unpackMessage,\n      `Please define 'options.packMessage / options.unpackMessage' for sending packed messages.`\n    );\n  }\n\n  _assertRequestIdHandlers() {\n    const {attachRequestId, extractRequestId} = this._options;\n    throwIf(!attachRequestId || !extractRequestId,\n      `Please define 'options.attachRequestId / options.extractRequestId' for sending requests.`\n    );\n  }\n}\n\nmodule.exports = WebSocketAsPromised;\n","// chnl v0.4.2 by Vitaliy Potapov\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Channel = factory());\n}(this, function () { 'use strict';\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  var innerEvents = ['onListenerAdded', 'onListenerRemoved', 'onFirstListenerAdded', 'onLastListenerRemoved'];\n  /**\n   * Channel of particular events. Allows attach/detach listeners and dispatch event data.\n   *\n   * @param {String} [name]\n   * @param {Boolean} [noInnerEvents]\n   *\n   * @example\n   * import Channel from 'chnl';\n   *\n   * // create channel\n   * const onMyEvent = new Channel();\n   * // listen\n   * onMyEvent.addListener(data => console.log(data));\n   * // dispatch data\n   * onMyEvent.dispatch(data);\n   */\n\n  var Channel =\n  /*#__PURE__*/\n  function () {\n    function Channel(name, noInnerEvents) {\n      var _this = this;\n\n      _classCallCheck(this, Channel);\n\n      this._listeners = [];\n      this._mute = false;\n      this._accumulate = false;\n      this._accumulatedEvents = [];\n      this._name = name || '';\n      this._noInnerEvents = Boolean(noInnerEvents);\n\n      if (!noInnerEvents) {\n        innerEvents.forEach(function (eventName) {\n          return _this[eventName] = new Channel(eventName, true);\n        });\n      }\n    }\n    /**\n     * Add listener for event\n     * @param {Function} callback\n     * @param {Object} [context]\n     */\n\n\n    _createClass(Channel, [{\n      key: \"addListener\",\n      value: function addListener(callback, context) {\n        this._pushListener(callback, context, false);\n      }\n      /**\n       * Add once listener for event\n       * @param {Function} callback\n       * @param {Object} [context]\n       */\n\n    }, {\n      key: \"addOnceListener\",\n      value: function addOnceListener(callback, context) {\n        this._pushListener(callback, context, true);\n      }\n      /**\n       * Remove listener from event\n       * @param {Function} callback\n       * @param {Object} [context]\n       */\n\n    }, {\n      key: \"removeListener\",\n      value: function removeListener(callback, context) {\n        this._ensureFunction(callback);\n\n        var index = this._indexOfListener(callback, context);\n\n        if (index >= 0) {\n          this._spliceListener(index);\n        }\n      }\n      /**\n       * Remove all listeners from channel.\n       */\n\n    }, {\n      key: \"removeAllListeners\",\n      value: function removeAllListeners() {\n        while (this.hasListeners()) {\n          this._spliceListener(0);\n        }\n      }\n      /**\n       * Is listener exist\n       * @param {Function} callback\n       * @param {Object} [context]\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"hasListener\",\n      value: function hasListener(callback, context) {\n        this._ensureFunction(callback);\n\n        return this._indexOfListener(callback, context) >= 0;\n      }\n      /**\n       * Are there any listeners\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"hasListeners\",\n      value: function hasListeners() {\n        return this._listeners.length > 0;\n      }\n      /**\n       * Call all listeners with specified params\n       */\n\n    }, {\n      key: \"dispatch\",\n      value: function dispatch() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        this._invokeListeners({\n          args: args,\n          async: false\n        });\n      }\n      /**\n       * Call all listeners with specified params asynchronously\n       */\n\n    }, {\n      key: \"dispatchAsync\",\n      value: function dispatchAsync() {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        this._invokeListeners({\n          args: args,\n          async: true\n        });\n      }\n      /**\n       * Mute channel\n       * @param {Object} [options]\n       * @param {Boolean} [options.accumulate] accumulate events and call listeners after .unmute()\n       */\n\n    }, {\n      key: \"mute\",\n      value: function mute() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        this._mute = true;\n\n        if (options.accumulate) {\n          this._accumulate = true;\n        } else {\n          this._accumulate = false;\n          this._accumulatedEvents = [];\n        }\n      }\n      /**\n       * Unmute channel\n       */\n\n    }, {\n      key: \"unmute\",\n      value: function unmute() {\n        this._mute = false;\n\n        if (this._accumulate) {\n          this._dispatchAccumulated();\n\n          this._accumulate = false;\n        }\n      }\n      /**\n       * @param {Object} options\n       * @param {Array} options.args\n       * @param {Boolean} [options.async]\n       * @private\n       */\n\n    }, {\n      key: \"_invokeListeners\",\n      value: function _invokeListeners() {\n        var _this2 = this;\n\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n          args: [],\n          async: false\n        };\n\n        if (!this._mute) {\n          // ToDo: block adding/removing listeners to channel (throw an error) during dispatch operation\n          var listnersToInvoke = this._listeners.slice();\n\n          listnersToInvoke.forEach(function (listener) {\n            _this2._invokeListener(listener, options);\n\n            if (listener.once) {\n              _this2.removeListener(listener.callback, listener.context);\n            }\n          });\n        } else if (this._accumulate) {\n          this._accumulatedEvents.push(options);\n        }\n      }\n      /**\n       * @param {Object} listener\n       * @param {Object} options\n       * @param {Array} options.args\n       * @param {Boolean} options.async\n       * @private\n       */\n\n    }, {\n      key: \"_invokeListener\",\n      value: function _invokeListener(listener, options) {\n        if (options.async) {\n          setTimeout(function () {\n            return listener.callback.apply(listener.context, options.args);\n          }, 0);\n        } else {\n          listener.callback.apply(listener.context, options.args);\n        }\n      }\n      /**\n       * Ensure function\n       * @param {Function} callback\n       */\n\n    }, {\n      key: \"_ensureFunction\",\n      value: function _ensureFunction(callback) {\n        if (typeof callback !== 'function') {\n          throw new Error('Channel ' + this._name + ': listener is not a function');\n        }\n      }\n      /**\n       * Dispatch inner events when listener is added\n       * @private\n       */\n\n    }, {\n      key: \"_dispatchInnerAddEvents\",\n      value: function _dispatchInnerAddEvents() {\n        if (!this._noInnerEvents) {\n          this.onListenerAdded.dispatch.apply(this.onListenerAdded, arguments);\n\n          if (this._listeners.length === 1) {\n            this.onFirstListenerAdded.dispatch.apply(this.onFirstListenerAdded, arguments);\n          }\n        }\n      }\n      /**\n       * Dispatch inner events when listener is removed\n       * @private\n       */\n\n    }, {\n      key: \"_dispatchInnerRemoveEvents\",\n      value: function _dispatchInnerRemoveEvents() {\n        if (!this._noInnerEvents) {\n          this.onListenerRemoved.dispatch.apply(this.onListenerRemoved, arguments);\n\n          if (this._listeners.length === 0) {\n            this.onLastListenerRemoved.dispatch.apply(this.onLastListenerRemoved, arguments);\n          }\n        }\n      }\n      /**\n       * Find listener index\n       * @param {Function} callback\n       * @param {Object} [context]\n       * @private\n       */\n\n    }, {\n      key: \"_indexOfListener\",\n      value: function _indexOfListener(callback, context) {\n        for (var i = 0; i < this._listeners.length; i++) {\n          var listener = this._listeners[i];\n          var equalCallbacks = listener.callback === callback;\n          var emptyContexts = context === undefined && listener.context === undefined;\n          var equalContexts = context === listener.context;\n\n          if (equalCallbacks && (emptyContexts || equalContexts)) {\n            return i;\n          }\n        }\n      }\n      /**\n       * Dispatch accumulated events\n       * @private\n       */\n\n    }, {\n      key: \"_dispatchAccumulated\",\n      value: function _dispatchAccumulated() {\n        var _this3 = this;\n\n        this._accumulatedEvents.forEach(function (options) {\n          return _this3._invokeListeners(options);\n        });\n\n        this._accumulatedEvents = [];\n      }\n      /**\n       * Pushes listener\n       * @param {Function} callback\n       * @param {Object} context\n       * @param {Boolean} once\n       */\n\n    }, {\n      key: \"_pushListener\",\n      value: function _pushListener(callback, context, once) {\n        this._ensureFunction(callback);\n\n        this._listeners.push({\n          callback: callback,\n          context: context,\n          once: once\n        });\n\n        this._dispatchInnerAddEvents.apply(this, arguments);\n      }\n      /**\n       * Splice listener under index\n       * @param {Number} index\n       */\n\n    }, {\n      key: \"_spliceListener\",\n      value: function _spliceListener(index) {\n        var listener = this._listeners[index];\n\n        this._listeners.splice(index, 1);\n\n        var args = [listener.callback];\n\n        if (listener.context) {\n          args.push(listener.context);\n        }\n\n        this._dispatchInnerRemoveEvents.apply(this, args);\n      }\n    }]);\n\n    return Channel;\n  }();\n\n  /**\n   * Event emitter similar to Node.js [EventEmitter](https://nodejs.org/api/events.html#events_class_eventemitter).\n   * The main difference from single channel is that each method takes additional `event` argument.\n   *\n   * @example\n   * import Channel from 'chnl';\n   *\n   * // create emitter\n   * const emitter = new Channel.EventEmitter();\n   * // listen 'myEvent'\n   * emitter.on('myEvent', data => console.log(data));\n   * // emit 'myEvent'\n   * emitter.emit('myEvent', 'hello world!');\n   */\n\n  var EventEmitter =\n  /*#__PURE__*/\n  function () {\n    function EventEmitter() {\n      _classCallCheck(this, EventEmitter);\n\n      this._channels = new Map();\n    }\n    /**\n     * Adds listener to specific event\n     *\n     * @param {String} event\n     * @param {Function} callback\n     * @param {Object} [context]\n     */\n\n\n    _createClass(EventEmitter, [{\n      key: \"addListener\",\n      value: function addListener(event, callback, context) {\n        this._getChannel(event).addListener(callback, context);\n      }\n      /**\n       * Adds listener to specific event (alias to addListener)\n       *\n       * @param {String} event\n       * @param {Function} callback\n       * @param {Object} [context]\n       */\n\n    }, {\n      key: \"on\",\n      value: function on(event, callback, context) {\n        this.addListener(event, callback, context);\n      }\n      /**\n       * Adds once listener to specific event\n       *\n       * @param {String} event\n       * @param {Function} callback\n       * @param {Object} [context]\n       */\n\n    }, {\n      key: \"addOnceListener\",\n      value: function addOnceListener(event, callback, context) {\n        this._getChannel(event).addOnceListener(callback, context);\n      }\n      /**\n       * Adds once listener to specific event (alias to addOnceListener)\n       *\n       * @param {String} event\n       * @param {Function} callback\n       * @param {Object} [context]\n       */\n\n    }, {\n      key: \"once\",\n      value: function once(event, callback, context) {\n        this.addOnceListener(event, callback, context);\n      }\n      /**\n       * Removes listener from specific event\n       *\n       * @param {String} event\n       * @param {Function} callback\n       * @param {Object} [context]\n       */\n\n    }, {\n      key: \"removeListener\",\n      value: function removeListener(event, callback, context) {\n        this._getChannel(event).removeListener(callback, context);\n      }\n      /**\n       * Removes listener from specific event (alias to removeListener)\n       *\n       * @param {String} event\n       * @param {Function} callback\n       * @param {Object} [context]\n       */\n\n    }, {\n      key: \"off\",\n      value: function off(event, callback, context) {\n        this.removeListener(event, callback, context);\n      }\n      /**\n       * Is listener exist for specific event\n       *\n       * @param {String} event\n       * @param {Function} callback\n       * @param {Object} [context]\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"hasListener\",\n      value: function hasListener(event, callback, context) {\n        return this._getChannel(event).hasListener(callback, context);\n      }\n      /**\n       * Is listener exist for specific event (alias to hasListener)\n       *\n       * @param {String} event\n       * @param {Function} callback\n       * @param {Object} [context]\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"has\",\n      value: function has(event, callback, context) {\n        return this.hasListener(event, callback, context);\n      }\n      /**\n       * Are there any listeners for specific event\n       *\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: \"hasListeners\",\n      value: function hasListeners(event) {\n        return this._getChannel(event).hasListeners();\n      }\n      /**\n       * Call all listeners for specific event\n       *\n       * @param {String} event\n       * @param {*} args\n       */\n\n    }, {\n      key: \"dispatch\",\n      value: function dispatch(event) {\n        var _this$_getChannel;\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        (_this$_getChannel = this._getChannel(event)).dispatch.apply(_this$_getChannel, args);\n      }\n      /**\n       * Call all listeners for specific event\n       *\n       * @param {String} event\n       * @param {*} args\n       */\n\n    }, {\n      key: \"emit\",\n      value: function emit(event) {\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        this.dispatch.apply(this, [event].concat(args));\n      }\n      /**\n       * Returns channe by event name\n       *\n       * @param {String} event\n       * @returns {Channel}\n       * @private\n       */\n\n    }, {\n      key: \"_getChannel\",\n      value: function _getChannel(event) {\n        if (!this._channels.has(event)) {\n          this._channels.set(event, new Channel(event));\n        }\n\n        return this._channels.get(event);\n      }\n    }]);\n\n    return EventEmitter;\n  }();\n\n  /**\n   * Subscription item\n   * @private\n   */\n  var SubscriptionItem =\n  /*#__PURE__*/\n  function () {\n    /**\n     * Constructor\n     *\n     * @param {Object} params\n     * @param {Object} params.channel\n     * @param {String} [params.event]\n     * @param {Function} params.listener\n     */\n    function SubscriptionItem(params) {\n      _classCallCheck(this, SubscriptionItem);\n\n      this._params = params;\n      this._isOn = false;\n\n      this._assertParams();\n    }\n    /**\n     * Turn on listener of channel\n     */\n\n\n    _createClass(SubscriptionItem, [{\n      key: \"on\",\n      value: function on() {\n        if (!this._isOn) {\n          var channel = this._params.channel;\n          var method = channel.addListener || channel.addEventListener || channel.on;\n\n          this._applyMethod(method);\n\n          this._isOn = true;\n        }\n      }\n      /**\n       * Turn off listener of channel\n       */\n\n    }, {\n      key: \"off\",\n      value: function off() {\n        if (this._isOn) {\n          var channel = this._params.channel;\n          var method = channel.removeListener || channel.removeEventListener || channel.off;\n\n          this._applyMethod(method);\n\n          this._isOn = false;\n        }\n      }\n    }, {\n      key: \"_applyMethod\",\n      value: function _applyMethod(method) {\n        var _this$_params = this._params,\n            channel = _this$_params.channel,\n            event = _this$_params.event,\n            listener = _this$_params.listener;\n        var args = event ? [event, listener] : [listener];\n        method.apply(channel, args);\n      }\n    }, {\n      key: \"_assertParams\",\n      value: function _assertParams() {\n        var _this$_params2 = this._params,\n            channel = _this$_params2.channel,\n            event = _this$_params2.event,\n            listener = _this$_params2.listener;\n\n        if (!channel || _typeof(channel) !== 'object') {\n          throw new Error('Channel should be object');\n        }\n\n        if (event && typeof event !== 'string') {\n          throw new Error('Event should be string');\n        }\n\n        if (!listener || typeof listener !== 'function') {\n          throw new Error('Listener should be function');\n        }\n      }\n    }]);\n\n    return SubscriptionItem;\n  }();\n\n  /**\n   * Utility class allowing dynamically attach/detach batch of listeners to event channels.\n   *\n   * @param {Array<{channel, event, listener}>} items\n   *\n   * @example\n   * import Channel from 'chnl';\n   * const subscription = new Channel.Subscription([\n   *   {\n   *     channel: chrome.tabs.onUpdated,\n   *     listener: this._onTabUpdated.bind(this)\n   *   }\n   * ]);\n   *\n   * // attach listeners\n   * subscription.on();\n   * // detach listeners\n   * subscription.off();\n   */\n\n  var Subscription =\n  /*#__PURE__*/\n  function () {\n    function Subscription(items) {\n      _classCallCheck(this, Subscription);\n\n      this._items = items.map(function (params) {\n        return new SubscriptionItem(params);\n      });\n    }\n    /**\n     * Turn on all listeners\n     *\n     * @returns {Subscription}\n     */\n\n\n    _createClass(Subscription, [{\n      key: \"on\",\n      value: function on() {\n        this._items.forEach(function (item) {\n          return item.on();\n        });\n\n        return this;\n      }\n      /**\n       * Turn off all listeners\n       *\n       * @returns {Subscription}\n       */\n\n    }, {\n      key: \"off\",\n      value: function off() {\n        this._items.forEach(function (item) {\n          return item.off();\n        });\n\n        return this;\n      }\n    }]);\n\n    return Subscription;\n  }();\n\n  /**\n   * Utility class that extends Subscription for using in ReactComponent - automatically attach/detach listeners\n   * in `componentDidMount` / `componentWillUnmount`.\n   *\n   * @param {ReactComponent} component\n   * @param {Array<{channel, event, listener}>} items\n   *\n   * @example\n   * class Button extends React.Component {\n   *   constructor() {\n   *     super();\n   *     new Channel.ReactSubscription(this, [\n   *       {channel: onNewData, listener: this.handleNewData.bind(this)}\n   *     ]);\n   *   }\n   * }\n   *\n   * // actually equals to (but with more boilerplate code):\n   * class Button extends React.Component {\n   *   constructor() {\n   *     super();\n   *     this.subscription = new Channel.Subscription([\n   *       {channel: onNewData, listener: this.handleNewData.bind(this)}\n   *     ]);\n   *   }\n   *   componentDidMount() {\n   *     this.subscription.on();\n   *   }\n   *   componentWillUnmount() {\n   *     this.subscription.off();\n   *   }\n   * }\n   */\n\n  var ReactSubscription =\n  /*#__PURE__*/\n  function (_Subscription) {\n    _inherits(ReactSubscription, _Subscription);\n\n    function ReactSubscription(component, items) {\n      var _this;\n\n      _classCallCheck(this, ReactSubscription);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactSubscription).call(this, items));\n\n      _this._overrideComponentCallback(component, 'componentDidMount', 'on');\n\n      _this._overrideComponentCallback(component, 'componentWillUnmount', 'off');\n\n      return _this;\n    }\n    /**\n     * @param {ReactComponent} component\n     * @param {String} callbackName\n     * @param {String} methodName\n     * @private\n     */\n\n\n    _createClass(ReactSubscription, [{\n      key: \"_overrideComponentCallback\",\n      value: function _overrideComponentCallback(component, callbackName, methodName) {\n        var _this2 = this;\n\n        var baseCallback = component[callbackName];\n\n        component[callbackName] = function () {\n          _this2[methodName]();\n\n          if (typeof baseCallback === 'function') {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            return baseCallback.apply(component, args);\n          }\n        };\n      }\n    }]);\n\n    return ReactSubscription;\n  }(Subscription);\n\n  /**\n   * Chnl entry point\n   */\n  /**\n   * @private\n   */\n\n  var chnl = Channel;\n  chnl.EventEmitter = EventEmitter;\n  chnl.Subscription = Subscription;\n  chnl.ReactSubscription = ReactSubscription;\n  /*\n   Can not export additional classes like:\n\n   export {\n   EventEmitter,\n   Subscription,\n   };\n\n   because in that case babel's output is not compatible with pure commonjs\n   See: http://stackoverflow.com/questions/33505992/babel-6-changes-how-it-exports-default\n   */\n\n  return chnl;\n\n}));\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = flatOptions;\nfunction flatOptions(options, defaults) {\n  var result = Object.assign({}, defaults);\n  if (options && (typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n    Object.keys(options).forEach(function (key) {\n      return validateOption(key, defaults) && copyOption(key, options, result);\n    });\n  }\n  return result;\n}\n\nfunction copyOption(key, from, to) {\n  if (from[key] !== undefined) {\n    to[key] = from[key];\n  }\n}\n\nfunction validateOption(key, defaults) {\n  if (defaults && !Object.hasOwnProperty.call(defaults, key)) {\n    throw new Error('Unknown option: ' + key);\n  }\n  return true;\n}\nmodule.exports = exports['default'];","/**\n * Class for manage pending requests.\n * @private\n */\n\nconst PromiseController = require('promise-controller');\nconst promiseFinally = require('promise.prototype.finally');\n\nmodule.exports = class Requests {\n  constructor() {\n    this._items = new Map();\n  }\n\n  /**\n   * Creates new request and stores it in the list.\n   *\n   * @param {String|Number} requestId\n   * @param {Function} fn\n   * @param {Number} timeout\n   * @returns {Promise}\n   */\n  create(requestId, fn, timeout) {\n    this._rejectExistingRequest(requestId);\n    return this._createNewRequest(requestId, fn, timeout);\n  }\n\n  resolve(requestId, data) {\n    if (requestId && this._items.has(requestId)) {\n      this._items.get(requestId).resolve(data);\n    }\n  }\n\n  rejectAll(error) {\n    this._items.forEach(request => request.isPending ? request.reject(error) : null);\n  }\n\n  _rejectExistingRequest(requestId) {\n    const existingRequest = this._items.get(requestId);\n    if (existingRequest && existingRequest.isPending) {\n      existingRequest.reject(new Error(`WebSocket request is replaced, id: ${requestId}`));\n    }\n  }\n\n  _createNewRequest(requestId, fn, timeout) {\n    const request = new PromiseController({\n      timeout,\n      timeoutReason: `WebSocket request was rejected by timeout (${timeout} ms). RequestId: ${requestId}`\n    });\n    this._items.set(requestId, request);\n    return promiseFinally(request.call(fn), () => this._deleteRequest(requestId, request));\n  }\n\n  _deleteRequest(requestId, request) {\n    // this check is important when request was replaced\n    if (this._items.get(requestId) === request) {\n      this._items.delete(requestId);\n    }\n  }\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar bound = bind.call(Function.call, getPolyfill());\n\ndefine(bound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = bound;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\n// modified from https://github.com/es-shims/es5-shim\nvar has = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\nvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\nvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\nvar dontEnums = [\n\t'toString',\n\t'toLocaleString',\n\t'valueOf',\n\t'hasOwnProperty',\n\t'isPrototypeOf',\n\t'propertyIsEnumerable',\n\t'constructor'\n];\nvar equalsConstructorPrototype = function (o) {\n\tvar ctor = o.constructor;\n\treturn ctor && ctor.prototype === o;\n};\nvar excludedKeys = {\n\t$console: true,\n\t$external: true,\n\t$frame: true,\n\t$frameElement: true,\n\t$frames: true,\n\t$innerHeight: true,\n\t$innerWidth: true,\n\t$outerHeight: true,\n\t$outerWidth: true,\n\t$pageXOffset: true,\n\t$pageYOffset: true,\n\t$parent: true,\n\t$scrollLeft: true,\n\t$scrollTop: true,\n\t$scrollX: true,\n\t$scrollY: true,\n\t$self: true,\n\t$webkitIndexedDB: true,\n\t$webkitStorageInfo: true,\n\t$window: true\n};\nvar hasAutomationEqualityBug = (function () {\n\t/* global window */\n\tif (typeof window === 'undefined') { return false; }\n\tfor (var k in window) {\n\t\ttry {\n\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\ttry {\n\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}());\nvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t/* global window */\n\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\treturn equalsConstructorPrototype(o);\n\t}\n\ttry {\n\t\treturn equalsConstructorPrototype(o);\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar keysShim = function keys(object) {\n\tvar isObject = object !== null && typeof object === 'object';\n\tvar isFunction = toStr.call(object) === '[object Function]';\n\tvar isArguments = isArgs(object);\n\tvar isString = isObject && toStr.call(object) === '[object String]';\n\tvar theKeys = [];\n\n\tif (!isObject && !isFunction && !isArguments) {\n\t\tthrow new TypeError('Object.keys called on a non-object');\n\t}\n\n\tvar skipProto = hasProtoEnumBug && isFunction;\n\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\ttheKeys.push(String(i));\n\t\t}\n\t}\n\n\tif (isArguments && object.length > 0) {\n\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\ttheKeys.push(String(j));\n\t\t}\n\t} else {\n\t\tfor (var name in object) {\n\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\ttheKeys.push(String(name));\n\t\t\t}\n\t\t}\n\t}\n\n\tif (hasDontEnumBug) {\n\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t}\n\t\t}\n\t}\n\treturn theKeys;\n};\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\treturn (Object.keys(arguments) || '').length === 2;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tvar originalKeys = Object.keys;\n\t\t\tObject.keys = function keys(object) {\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t} else {\n\t\t\t\t\treturn originalKeys(object);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\n\nmodule.exports = function forEach (obj, fn, ctx) {\n    if (toString.call(fn) !== '[object Function]') {\n        throw new TypeError('iterator must be a function');\n    }\n    var l = obj.length;\n    if (l === +l) {\n        for (var i = 0; i < l; i++) {\n            fn.call(ctx, obj[i], i, obj);\n        }\n    } else {\n        for (var k in obj) {\n            if (hasOwn.call(obj, k)) {\n                fn.call(ctx, obj[k], k, obj);\n            }\n        }\n    }\n};\n\n","'use strict';\n\nmodule.exports = require('./es2016');\n","'use strict';\n\nvar ES2015 = require('./es2015');\nvar assign = require('./helpers/assign');\n\nvar ES2016 = assign(assign({}, ES2015), {\n\t// https://github.com/tc39/ecma262/pull/60\n\tSameValueNonNumber: function SameValueNonNumber(x, y) {\n\t\tif (typeof x === 'number' || typeof x !== typeof y) {\n\t\t\tthrow new TypeError('SameValueNonNumber requires two non-number values of the same type.');\n\t\t}\n\t\treturn this.SameValue(x, y);\n\t}\n});\n\nmodule.exports = ES2016;\n","'use strict';\n\nvar has = require('has');\nvar toPrimitive = require('es-to-primitive/es6');\n\nvar toStr = Object.prototype.toString;\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol';\n\nvar $isNaN = require('./helpers/isNaN');\nvar $isFinite = require('./helpers/isFinite');\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1;\n\nvar assign = require('./helpers/assign');\nvar sign = require('./helpers/sign');\nvar mod = require('./helpers/mod');\nvar isPrimitive = require('./helpers/isPrimitive');\nvar parseInteger = parseInt;\nvar bind = require('function-bind');\nvar arraySlice = bind.call(Function.call, Array.prototype.slice);\nvar strSlice = bind.call(Function.call, String.prototype.slice);\nvar isBinary = bind.call(Function.call, RegExp.prototype.test, /^0b[01]+$/i);\nvar isOctal = bind.call(Function.call, RegExp.prototype.test, /^0o[0-7]+$/i);\nvar regexExec = bind.call(Function.call, RegExp.prototype.exec);\nvar nonWS = ['\\u0085', '\\u200b', '\\ufffe'].join('');\nvar nonWSregex = new RegExp('[' + nonWS + ']', 'g');\nvar hasNonWS = bind.call(Function.call, RegExp.prototype.test, nonWSregex);\nvar invalidHexLiteral = /^[-+]0x[0-9a-f]+$/i;\nvar isInvalidHexLiteral = bind.call(Function.call, RegExp.prototype.test, invalidHexLiteral);\n\n// whitespace from: http://es5.github.io/#x15.5.4.20\n// implementation from https://github.com/es-shims/es5-shim/blob/v3.4.0/es5-shim.js#L1304-L1324\nvar ws = [\n\t'\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003',\n\t'\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028',\n\t'\\u2029\\uFEFF'\n].join('');\nvar trimRegex = new RegExp('(^[' + ws + ']+)|([' + ws + ']+$)', 'g');\nvar replace = bind.call(Function.call, String.prototype.replace);\nvar trim = function (value) {\n\treturn replace(value, trimRegex, '');\n};\n\nvar ES5 = require('./es5');\n\nvar hasRegExpMatcher = require('is-regex');\n\n// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-abstract-operations\nvar ES6 = assign(assign({}, ES5), {\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-call-f-v-args\n\tCall: function Call(F, V) {\n\t\tvar args = arguments.length > 2 ? arguments[2] : [];\n\t\tif (!this.IsCallable(F)) {\n\t\t\tthrow new TypeError(F + ' is not a function');\n\t\t}\n\t\treturn F.apply(V, args);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive\n\tToPrimitive: toPrimitive,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toboolean\n\t// ToBoolean: ES5.ToBoolean,\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-tonumber\n\tToNumber: function ToNumber(argument) {\n\t\tvar value = isPrimitive(argument) ? argument : toPrimitive(argument, Number);\n\t\tif (typeof value === 'symbol') {\n\t\t\tthrow new TypeError('Cannot convert a Symbol value to a number');\n\t\t}\n\t\tif (typeof value === 'string') {\n\t\t\tif (isBinary(value)) {\n\t\t\t\treturn this.ToNumber(parseInteger(strSlice(value, 2), 2));\n\t\t\t} else if (isOctal(value)) {\n\t\t\t\treturn this.ToNumber(parseInteger(strSlice(value, 2), 8));\n\t\t\t} else if (hasNonWS(value) || isInvalidHexLiteral(value)) {\n\t\t\t\treturn NaN;\n\t\t\t} else {\n\t\t\t\tvar trimmed = trim(value);\n\t\t\t\tif (trimmed !== value) {\n\t\t\t\t\treturn this.ToNumber(trimmed);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Number(value);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tointeger\n\t// ToInteger: ES5.ToNumber,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint32\n\t// ToInt32: ES5.ToInt32,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32\n\t// ToUint32: ES5.ToUint32,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint16\n\tToInt16: function ToInt16(argument) {\n\t\tvar int16bit = this.ToUint16(argument);\n\t\treturn int16bit >= 0x8000 ? int16bit - 0x10000 : int16bit;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint16\n\t// ToUint16: ES5.ToUint16,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toint8\n\tToInt8: function ToInt8(argument) {\n\t\tvar int8bit = this.ToUint8(argument);\n\t\treturn int8bit >= 0x80 ? int8bit - 0x100 : int8bit;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint8\n\tToUint8: function ToUint8(argument) {\n\t\tvar number = this.ToNumber(argument);\n\t\tif ($isNaN(number) || number === 0 || !$isFinite(number)) { return 0; }\n\t\tvar posInt = sign(number) * Math.floor(Math.abs(number));\n\t\treturn mod(posInt, 0x100);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint8clamp\n\tToUint8Clamp: function ToUint8Clamp(argument) {\n\t\tvar number = this.ToNumber(argument);\n\t\tif ($isNaN(number) || number <= 0) { return 0; }\n\t\tif (number >= 0xFF) { return 0xFF; }\n\t\tvar f = Math.floor(argument);\n\t\tif (f + 0.5 < number) { return f + 1; }\n\t\tif (number < f + 0.5) { return f; }\n\t\tif (f % 2 !== 0) { return f + 1; }\n\t\treturn f;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tostring\n\tToString: function ToString(argument) {\n\t\tif (typeof argument === 'symbol') {\n\t\t\tthrow new TypeError('Cannot convert a Symbol value to a string');\n\t\t}\n\t\treturn String(argument);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toobject\n\tToObject: function ToObject(value) {\n\t\tthis.RequireObjectCoercible(value);\n\t\treturn Object(value);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-topropertykey\n\tToPropertyKey: function ToPropertyKey(argument) {\n\t\tvar key = this.ToPrimitive(argument, String);\n\t\treturn typeof key === 'symbol' ? key : this.ToString(key);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n\tToLength: function ToLength(argument) {\n\t\tvar len = this.ToInteger(argument);\n\t\tif (len <= 0) { return 0; } // includes converting -0 to +0\n\t\tif (len > MAX_SAFE_INTEGER) { return MAX_SAFE_INTEGER; }\n\t\treturn len;\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-canonicalnumericindexstring\n\tCanonicalNumericIndexString: function CanonicalNumericIndexString(argument) {\n\t\tif (toStr.call(argument) !== '[object String]') {\n\t\t\tthrow new TypeError('must be a string');\n\t\t}\n\t\tif (argument === '-0') { return -0; }\n\t\tvar n = this.ToNumber(argument);\n\t\tif (this.SameValue(this.ToString(n), argument)) { return n; }\n\t\treturn void 0;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-requireobjectcoercible\n\tRequireObjectCoercible: ES5.CheckObjectCoercible,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isarray\n\tIsArray: Array.isArray || function IsArray(argument) {\n\t\treturn toStr.call(argument) === '[object Array]';\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-iscallable\n\t// IsCallable: ES5.IsCallable,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isconstructor\n\tIsConstructor: function IsConstructor(argument) {\n\t\treturn typeof argument === 'function' && !!argument.prototype; // unfortunately there's no way to truly check this without try/catch `new argument`\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isextensible-o\n\tIsExtensible: function IsExtensible(obj) {\n\t\tif (!Object.preventExtensions) { return true; }\n\t\tif (isPrimitive(obj)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn Object.isExtensible(obj);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isinteger\n\tIsInteger: function IsInteger(argument) {\n\t\tif (typeof argument !== 'number' || $isNaN(argument) || !$isFinite(argument)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar abs = Math.abs(argument);\n\t\treturn Math.floor(abs) === abs;\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ispropertykey\n\tIsPropertyKey: function IsPropertyKey(argument) {\n\t\treturn typeof argument === 'string' || typeof argument === 'symbol';\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-isregexp\n\tIsRegExp: function IsRegExp(argument) {\n\t\tif (!argument || typeof argument !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\tif (hasSymbols) {\n\t\t\tvar isRegExp = argument[Symbol.match];\n\t\t\tif (typeof isRegExp !== 'undefined') {\n\t\t\t\treturn ES5.ToBoolean(isRegExp);\n\t\t\t}\n\t\t}\n\t\treturn hasRegExpMatcher(argument);\n\t},\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevalue\n\t// SameValue: ES5.SameValue,\n\n\t// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevaluezero\n\tSameValueZero: function SameValueZero(x, y) {\n\t\treturn (x === y) || ($isNaN(x) && $isNaN(y));\n\t},\n\n\t/**\n\t * 7.3.2 GetV (V, P)\n\t * 1. Assert: IsPropertyKey(P) is true.\n\t * 2. Let O be ToObject(V).\n\t * 3. ReturnIfAbrupt(O).\n\t * 4. Return O.[[Get]](P, V).\n\t */\n\tGetV: function GetV(V, P) {\n\t\t// 7.3.2.1\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\n\t\t// 7.3.2.2-3\n\t\tvar O = this.ToObject(V);\n\n\t\t// 7.3.2.4\n\t\treturn O[P];\n\t},\n\n\t/**\n\t * 7.3.9 - http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod\n\t * 1. Assert: IsPropertyKey(P) is true.\n\t * 2. Let func be GetV(O, P).\n\t * 3. ReturnIfAbrupt(func).\n\t * 4. If func is either undefined or null, return undefined.\n\t * 5. If IsCallable(func) is false, throw a TypeError exception.\n\t * 6. Return func.\n\t */\n\tGetMethod: function GetMethod(O, P) {\n\t\t// 7.3.9.1\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\n\t\t// 7.3.9.2\n\t\tvar func = this.GetV(O, P);\n\n\t\t// 7.3.9.4\n\t\tif (func == null) {\n\t\t\treturn void 0;\n\t\t}\n\n\t\t// 7.3.9.5\n\t\tif (!this.IsCallable(func)) {\n\t\t\tthrow new TypeError(P + 'is not a function');\n\t\t}\n\n\t\t// 7.3.9.6\n\t\treturn func;\n\t},\n\n\t/**\n\t * 7.3.1 Get (O, P) - http://www.ecma-international.org/ecma-262/6.0/#sec-get-o-p\n\t * 1. Assert: Type(O) is Object.\n\t * 2. Assert: IsPropertyKey(P) is true.\n\t * 3. Return O.[[Get]](P, O).\n\t */\n\tGet: function Get(O, P) {\n\t\t// 7.3.1.1\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('Assertion failed: Type(O) is not Object');\n\t\t}\n\t\t// 7.3.1.2\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\t\t// 7.3.1.3\n\t\treturn O[P];\n\t},\n\n\tType: function Type(x) {\n\t\tif (typeof x === 'symbol') {\n\t\t\treturn 'Symbol';\n\t\t}\n\t\treturn ES5.Type(x);\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/6.0/#sec-speciesconstructor\n\tSpeciesConstructor: function SpeciesConstructor(O, defaultConstructor) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('Assertion failed: Type(O) is not Object');\n\t\t}\n\t\tvar C = O.constructor;\n\t\tif (typeof C === 'undefined') {\n\t\t\treturn defaultConstructor;\n\t\t}\n\t\tif (this.Type(C) !== 'Object') {\n\t\t\tthrow new TypeError('O.constructor is not an Object');\n\t\t}\n\t\tvar S = hasSymbols && Symbol.species ? C[Symbol.species] : void 0;\n\t\tif (S == null) {\n\t\t\treturn defaultConstructor;\n\t\t}\n\t\tif (this.IsConstructor(S)) {\n\t\t\treturn S;\n\t\t}\n\t\tthrow new TypeError('no constructor found');\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-completepropertydescriptor\n\tCompletePropertyDescriptor: function CompletePropertyDescriptor(Desc) {\n\t\tif (!this.IsPropertyDescriptor(Desc)) {\n\t\t\tthrow new TypeError('Desc must be a Property Descriptor');\n\t\t}\n\n\t\tif (this.IsGenericDescriptor(Desc) || this.IsDataDescriptor(Desc)) {\n\t\t\tif (!has(Desc, '[[Value]]')) {\n\t\t\t\tDesc['[[Value]]'] = void 0;\n\t\t\t}\n\t\t\tif (!has(Desc, '[[Writable]]')) {\n\t\t\t\tDesc['[[Writable]]'] = false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (!has(Desc, '[[Get]]')) {\n\t\t\t\tDesc['[[Get]]'] = void 0;\n\t\t\t}\n\t\t\tif (!has(Desc, '[[Set]]')) {\n\t\t\t\tDesc['[[Set]]'] = void 0;\n\t\t\t}\n\t\t}\n\t\tif (!has(Desc, '[[Enumerable]]')) {\n\t\t\tDesc['[[Enumerable]]'] = false;\n\t\t}\n\t\tif (!has(Desc, '[[Configurable]]')) {\n\t\t\tDesc['[[Configurable]]'] = false;\n\t\t}\n\t\treturn Desc;\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-set-o-p-v-throw\n\tSet: function Set(O, P, V, Throw) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('O must be an Object');\n\t\t}\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('P must be a Property Key');\n\t\t}\n\t\tif (this.Type(Throw) !== 'Boolean') {\n\t\t\tthrow new TypeError('Throw must be a Boolean');\n\t\t}\n\t\tif (Throw) {\n\t\t\tO[P] = V;\n\t\t\treturn true;\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tO[P] = V;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-hasownproperty\n\tHasOwnProperty: function HasOwnProperty(O, P) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('O must be an Object');\n\t\t}\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('P must be a Property Key');\n\t\t}\n\t\treturn has(O, P);\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-hasproperty\n\tHasProperty: function HasProperty(O, P) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('O must be an Object');\n\t\t}\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('P must be a Property Key');\n\t\t}\n\t\treturn P in O;\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-isconcatspreadable\n\tIsConcatSpreadable: function IsConcatSpreadable(O) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\tif (hasSymbols && typeof Symbol.isConcatSpreadable === 'symbol') {\n\t\t\tvar spreadable = this.Get(O, Symbol.isConcatSpreadable);\n\t\t\tif (typeof spreadable !== 'undefined') {\n\t\t\t\treturn this.ToBoolean(spreadable);\n\t\t\t}\n\t\t}\n\t\treturn this.IsArray(O);\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-invoke\n\tInvoke: function Invoke(O, P) {\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('P must be a Property Key');\n\t\t}\n\t\tvar argumentsList = arraySlice(arguments, 2);\n\t\tvar func = this.GetV(O, P);\n\t\treturn this.Call(func, O, argumentsList);\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-createiterresultobject\n\tCreateIterResultObject: function CreateIterResultObject(value, done) {\n\t\tif (this.Type(done) !== 'Boolean') {\n\t\t\tthrow new TypeError('Assertion failed: Type(done) is not Boolean');\n\t\t}\n\t\treturn {\n\t\t\tvalue: value,\n\t\t\tdone: done\n\t\t};\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-regexpexec\n\tRegExpExec: function RegExpExec(R, S) {\n\t\tif (this.Type(R) !== 'Object') {\n\t\t\tthrow new TypeError('R must be an Object');\n\t\t}\n\t\tif (this.Type(S) !== 'String') {\n\t\t\tthrow new TypeError('S must be a String');\n\t\t}\n\t\tvar exec = this.Get(R, 'exec');\n\t\tif (this.IsCallable(exec)) {\n\t\t\tvar result = this.Call(exec, R, [S]);\n\t\t\tif (result === null || this.Type(result) === 'Object') {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tthrow new TypeError('\"exec\" method must return `null` or an Object');\n\t\t}\n\t\treturn regexExec(R, S);\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-arrayspeciescreate\n\tArraySpeciesCreate: function ArraySpeciesCreate(originalArray, length) {\n\t\tif (!this.IsInteger(length) || length < 0) {\n\t\t\tthrow new TypeError('Assertion failed: length must be an integer >= 0');\n\t\t}\n\t\tvar len = length === 0 ? 0 : length;\n\t\tvar C;\n\t\tvar isArray = this.IsArray(originalArray);\n\t\tif (isArray) {\n\t\t\tC = this.Get(originalArray, 'constructor');\n\t\t\t// TODO: figure out how to make a cross-realm normal Array, a same-realm Array\n\t\t\t// if (this.IsConstructor(C)) {\n\t\t\t// \tif C is another realm's Array, C = undefined\n\t\t\t// \tObject.getPrototypeOf(Object.getPrototypeOf(Object.getPrototypeOf(Array))) === null ?\n\t\t\t// }\n\t\t\tif (this.Type(C) === 'Object' && hasSymbols && Symbol.species) {\n\t\t\t\tC = this.Get(C, Symbol.species);\n\t\t\t\tif (C === null) {\n\t\t\t\t\tC = void 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (typeof C === 'undefined') {\n\t\t\treturn Array(len);\n\t\t}\n\t\tif (!this.IsConstructor(C)) {\n\t\t\tthrow new TypeError('C must be a constructor');\n\t\t}\n\t\treturn new C(len); // this.Construct(C, len);\n\t},\n\n\tCreateDataProperty: function CreateDataProperty(O, P, V) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('Assertion failed: Type(O) is not Object');\n\t\t}\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\t\tvar oldDesc = Object.getOwnPropertyDescriptor(O, P);\n\t\tvar extensible = oldDesc || (typeof Object.isExtensible !== 'function' || Object.isExtensible(O));\n\t\tvar immutable = oldDesc && (!oldDesc.writable || !oldDesc.configurable);\n\t\tif (immutable || !extensible) {\n\t\t\treturn false;\n\t\t}\n\t\tvar newDesc = {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: V,\n\t\t\twritable: true\n\t\t};\n\t\tObject.defineProperty(O, P, newDesc);\n\t\treturn true;\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-createdatapropertyorthrow\n\tCreateDataPropertyOrThrow: function CreateDataPropertyOrThrow(O, P, V) {\n\t\tif (this.Type(O) !== 'Object') {\n\t\t\tthrow new TypeError('Assertion failed: Type(O) is not Object');\n\t\t}\n\t\tif (!this.IsPropertyKey(P)) {\n\t\t\tthrow new TypeError('Assertion failed: IsPropertyKey(P) is not true');\n\t\t}\n\t\tvar success = this.CreateDataProperty(O, P, V);\n\t\tif (!success) {\n\t\t\tthrow new TypeError('unable to create data property');\n\t\t}\n\t\treturn success;\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-advancestringindex\n\tAdvanceStringIndex: function AdvanceStringIndex(S, index, unicode) {\n\t\tif (this.Type(S) !== 'String') {\n\t\t\tthrow new TypeError('Assertion failed: Type(S) is not String');\n\t\t}\n\t\tif (!this.IsInteger(index)) {\n\t\t\tthrow new TypeError('Assertion failed: length must be an integer >= 0 and <= (2**53 - 1)');\n\t\t}\n\t\tif (index < 0 || index > MAX_SAFE_INTEGER) {\n\t\t\tthrow new RangeError('Assertion failed: length must be an integer >= 0 and <= (2**53 - 1)');\n\t\t}\n\t\tif (this.Type(unicode) !== 'Boolean') {\n\t\t\tthrow new TypeError('Assertion failed: Type(unicode) is not Boolean');\n\t\t}\n\t\tif (!unicode) {\n\t\t\treturn index + 1;\n\t\t}\n\t\tvar length = S.length;\n\t\tif ((index + 1) >= length) {\n\t\t\treturn index + 1;\n\t\t}\n\t\tvar first = S.charCodeAt(index);\n\t\tif (first < 0xD800 || first > 0xDBFF) {\n\t\t\treturn index + 1;\n\t\t}\n\t\tvar second = S.charCodeAt(index + 1);\n\t\tif (second < 0xDC00 || second > 0xDFFF) {\n\t\t\treturn index + 1;\n\t\t}\n\t\treturn index + 2;\n\t}\n});\n\ndelete ES6.CheckObjectCoercible; // renamed in ES6 to RequireObjectCoercible\n\nmodule.exports = ES6;\n","'use strict';\n\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol';\n\nvar isPrimitive = require('./helpers/isPrimitive');\nvar isCallable = require('is-callable');\nvar isDate = require('is-date-object');\nvar isSymbol = require('is-symbol');\n\nvar ordinaryToPrimitive = function OrdinaryToPrimitive(O, hint) {\n\tif (typeof O === 'undefined' || O === null) {\n\t\tthrow new TypeError('Cannot call method on ' + O);\n\t}\n\tif (typeof hint !== 'string' || (hint !== 'number' && hint !== 'string')) {\n\t\tthrow new TypeError('hint must be \"string\" or \"number\"');\n\t}\n\tvar methodNames = hint === 'string' ? ['toString', 'valueOf'] : ['valueOf', 'toString'];\n\tvar method, result, i;\n\tfor (i = 0; i < methodNames.length; ++i) {\n\t\tmethod = O[methodNames[i]];\n\t\tif (isCallable(method)) {\n\t\t\tresult = method.call(O);\n\t\t\tif (isPrimitive(result)) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\tthrow new TypeError('No default value');\n};\n\nvar GetMethod = function GetMethod(O, P) {\n\tvar func = O[P];\n\tif (func !== null && typeof func !== 'undefined') {\n\t\tif (!isCallable(func)) {\n\t\t\tthrow new TypeError(func + ' returned for property ' + P + ' of object ' + O + ' is not a function');\n\t\t}\n\t\treturn func;\n\t}\n};\n\n// http://www.ecma-international.org/ecma-262/6.0/#sec-toprimitive\nmodule.exports = function ToPrimitive(input, PreferredType) {\n\tif (isPrimitive(input)) {\n\t\treturn input;\n\t}\n\tvar hint = 'default';\n\tif (arguments.length > 1) {\n\t\tif (PreferredType === String) {\n\t\t\thint = 'string';\n\t\t} else if (PreferredType === Number) {\n\t\t\thint = 'number';\n\t\t}\n\t}\n\n\tvar exoticToPrim;\n\tif (hasSymbols) {\n\t\tif (Symbol.toPrimitive) {\n\t\t\texoticToPrim = GetMethod(input, Symbol.toPrimitive);\n\t\t} else if (isSymbol(input)) {\n\t\t\texoticToPrim = Symbol.prototype.valueOf;\n\t\t}\n\t}\n\tif (typeof exoticToPrim !== 'undefined') {\n\t\tvar result = exoticToPrim.call(input, hint);\n\t\tif (isPrimitive(result)) {\n\t\t\treturn result;\n\t\t}\n\t\tthrow new TypeError('unable to convert exotic object to primitive');\n\t}\n\tif (hint === 'default' && (isDate(input) || isSymbol(input))) {\n\t\thint = 'string';\n\t}\n\treturn ordinaryToPrimitive(input, hint === 'default' ? 'number' : hint);\n};\n","'use strict';\n\nvar getDay = Date.prototype.getDay;\nvar tryDateObject = function tryDateObject(value) {\n\ttry {\n\t\tgetDay.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar toStr = Object.prototype.toString;\nvar dateClass = '[object Date]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isDateObject(value) {\n\tif (typeof value !== 'object' || value === null) { return false; }\n\treturn hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;\n};\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol() === 'symbol';\n\nif (hasSymbols) {\n\tvar symToStr = Symbol.prototype.toString;\n\tvar symStringRegex = /^Symbol\\(.*\\)$/;\n\tvar isSymbolObject = function isSymbolObject(value) {\n\t\tif (typeof value.valueOf() !== 'symbol') { return false; }\n\t\treturn symStringRegex.test(symToStr.call(value));\n\t};\n\tmodule.exports = function isSymbol(value) {\n\t\tif (typeof value === 'symbol') { return true; }\n\t\tif (toStr.call(value) !== '[object Symbol]') { return false; }\n\t\ttry {\n\t\t\treturn isSymbolObject(value);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n} else {\n\tmodule.exports = function isSymbol(value) {\n\t\t// this environment does not support Symbols.\n\t\treturn false;\n\t};\n}\n","module.exports = function isPrimitive(value) {\n\treturn value === null || (typeof value !== 'function' && typeof value !== 'object');\n};\n","'use strict';\n\nvar $isNaN = require('./helpers/isNaN');\nvar $isFinite = require('./helpers/isFinite');\n\nvar sign = require('./helpers/sign');\nvar mod = require('./helpers/mod');\n\nvar IsCallable = require('is-callable');\nvar toPrimitive = require('es-to-primitive/es5');\n\nvar has = require('has');\n\n// https://es5.github.io/#x9\nvar ES5 = {\n\tToPrimitive: toPrimitive,\n\n\tToBoolean: function ToBoolean(value) {\n\t\treturn !!value;\n\t},\n\tToNumber: function ToNumber(value) {\n\t\treturn Number(value);\n\t},\n\tToInteger: function ToInteger(value) {\n\t\tvar number = this.ToNumber(value);\n\t\tif ($isNaN(number)) { return 0; }\n\t\tif (number === 0 || !$isFinite(number)) { return number; }\n\t\treturn sign(number) * Math.floor(Math.abs(number));\n\t},\n\tToInt32: function ToInt32(x) {\n\t\treturn this.ToNumber(x) >> 0;\n\t},\n\tToUint32: function ToUint32(x) {\n\t\treturn this.ToNumber(x) >>> 0;\n\t},\n\tToUint16: function ToUint16(value) {\n\t\tvar number = this.ToNumber(value);\n\t\tif ($isNaN(number) || number === 0 || !$isFinite(number)) { return 0; }\n\t\tvar posInt = sign(number) * Math.floor(Math.abs(number));\n\t\treturn mod(posInt, 0x10000);\n\t},\n\tToString: function ToString(value) {\n\t\treturn String(value);\n\t},\n\tToObject: function ToObject(value) {\n\t\tthis.CheckObjectCoercible(value);\n\t\treturn Object(value);\n\t},\n\tCheckObjectCoercible: function CheckObjectCoercible(value, optMessage) {\n\t\t/* jshint eqnull:true */\n\t\tif (value == null) {\n\t\t\tthrow new TypeError(optMessage || 'Cannot call method on ' + value);\n\t\t}\n\t\treturn value;\n\t},\n\tIsCallable: IsCallable,\n\tSameValue: function SameValue(x, y) {\n\t\tif (x === y) { // 0 === -0, but they are not identical.\n\t\t\tif (x === 0) { return 1 / x === 1 / y; }\n\t\t\treturn true;\n\t\t}\n\t\treturn $isNaN(x) && $isNaN(y);\n\t},\n\n\t// http://www.ecma-international.org/ecma-262/5.1/#sec-8\n\tType: function Type(x) {\n\t\tif (x === null) {\n\t\t\treturn 'Null';\n\t\t}\n\t\tif (typeof x === 'undefined') {\n\t\t\treturn 'Undefined';\n\t\t}\n\t\tif (typeof x === 'function' || typeof x === 'object') {\n\t\t\treturn 'Object';\n\t\t}\n\t\tif (typeof x === 'number') {\n\t\t\treturn 'Number';\n\t\t}\n\t\tif (typeof x === 'boolean') {\n\t\t\treturn 'Boolean';\n\t\t}\n\t\tif (typeof x === 'string') {\n\t\t\treturn 'String';\n\t\t}\n\t},\n\n\t// http://ecma-international.org/ecma-262/6.0/#sec-property-descriptor-specification-type\n\tIsPropertyDescriptor: function IsPropertyDescriptor(Desc) {\n\t\tif (this.Type(Desc) !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\tvar allowed = {\n\t\t\t'[[Configurable]]': true,\n\t\t\t'[[Enumerable]]': true,\n\t\t\t'[[Get]]': true,\n\t\t\t'[[Set]]': true,\n\t\t\t'[[Value]]': true,\n\t\t\t'[[Writable]]': true\n\t\t};\n\t\t// jscs:disable\n\t\tfor (var key in Desc) { // eslint-disable-line\n\t\t\tif (has(Desc, key) && !allowed[key]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t// jscs:enable\n\t\tvar isData = has(Desc, '[[Value]]');\n\t\tvar IsAccessor = has(Desc, '[[Get]]') || has(Desc, '[[Set]]');\n\t\tif (isData && IsAccessor) {\n\t\t\tthrow new TypeError('Property Descriptors may not be both accessor and data descriptors');\n\t\t}\n\t\treturn true;\n\t},\n\n\t// http://ecma-international.org/ecma-262/5.1/#sec-8.10.1\n\tIsAccessorDescriptor: function IsAccessorDescriptor(Desc) {\n\t\tif (typeof Desc === 'undefined') {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.IsPropertyDescriptor(Desc)) {\n\t\t\tthrow new TypeError('Desc must be a Property Descriptor');\n\t\t}\n\n\t\tif (!has(Desc, '[[Get]]') && !has(Desc, '[[Set]]')) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t// http://ecma-international.org/ecma-262/5.1/#sec-8.10.2\n\tIsDataDescriptor: function IsDataDescriptor(Desc) {\n\t\tif (typeof Desc === 'undefined') {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.IsPropertyDescriptor(Desc)) {\n\t\t\tthrow new TypeError('Desc must be a Property Descriptor');\n\t\t}\n\n\t\tif (!has(Desc, '[[Value]]') && !has(Desc, '[[Writable]]')) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t// http://ecma-international.org/ecma-262/5.1/#sec-8.10.3\n\tIsGenericDescriptor: function IsGenericDescriptor(Desc) {\n\t\tif (typeof Desc === 'undefined') {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.IsPropertyDescriptor(Desc)) {\n\t\t\tthrow new TypeError('Desc must be a Property Descriptor');\n\t\t}\n\n\t\tif (!this.IsAccessorDescriptor(Desc) && !this.IsDataDescriptor(Desc)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// http://ecma-international.org/ecma-262/5.1/#sec-8.10.4\n\tFromPropertyDescriptor: function FromPropertyDescriptor(Desc) {\n\t\tif (typeof Desc === 'undefined') {\n\t\t\treturn Desc;\n\t\t}\n\n\t\tif (!this.IsPropertyDescriptor(Desc)) {\n\t\t\tthrow new TypeError('Desc must be a Property Descriptor');\n\t\t}\n\n\t\tif (this.IsDataDescriptor(Desc)) {\n\t\t\treturn {\n\t\t\t\tvalue: Desc['[[Value]]'],\n\t\t\t\twritable: !!Desc['[[Writable]]'],\n\t\t\t\tenumerable: !!Desc['[[Enumerable]]'],\n\t\t\t\tconfigurable: !!Desc['[[Configurable]]']\n\t\t\t};\n\t\t} else if (this.IsAccessorDescriptor(Desc)) {\n\t\t\treturn {\n\t\t\t\tget: Desc['[[Get]]'],\n\t\t\t\tset: Desc['[[Set]]'],\n\t\t\t\tenumerable: !!Desc['[[Enumerable]]'],\n\t\t\t\tconfigurable: !!Desc['[[Configurable]]']\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new TypeError('FromPropertyDescriptor must be called with a fully populated Property Descriptor');\n\t\t}\n\t},\n\n\t// http://ecma-international.org/ecma-262/5.1/#sec-8.10.5\n\tToPropertyDescriptor: function ToPropertyDescriptor(Obj) {\n\t\tif (this.Type(Obj) !== 'Object') {\n\t\t\tthrow new TypeError('ToPropertyDescriptor requires an object');\n\t\t}\n\n\t\tvar desc = {};\n\t\tif (has(Obj, 'enumerable')) {\n\t\t\tdesc['[[Enumerable]]'] = this.ToBoolean(Obj.enumerable);\n\t\t}\n\t\tif (has(Obj, 'configurable')) {\n\t\t\tdesc['[[Configurable]]'] = this.ToBoolean(Obj.configurable);\n\t\t}\n\t\tif (has(Obj, 'value')) {\n\t\t\tdesc['[[Value]]'] = Obj.value;\n\t\t}\n\t\tif (has(Obj, 'writable')) {\n\t\t\tdesc['[[Writable]]'] = this.ToBoolean(Obj.writable);\n\t\t}\n\t\tif (has(Obj, 'get')) {\n\t\t\tvar getter = Obj.get;\n\t\t\tif (typeof getter !== 'undefined' && !this.IsCallable(getter)) {\n\t\t\t\tthrow new TypeError('getter must be a function');\n\t\t\t}\n\t\t\tdesc['[[Get]]'] = getter;\n\t\t}\n\t\tif (has(Obj, 'set')) {\n\t\t\tvar setter = Obj.set;\n\t\t\tif (typeof setter !== 'undefined' && !this.IsCallable(setter)) {\n\t\t\t\tthrow new TypeError('setter must be a function');\n\t\t\t}\n\t\t\tdesc['[[Set]]'] = setter;\n\t\t}\n\n\t\tif ((has(desc, '[[Get]]') || has(desc, '[[Set]]')) && (has(desc, '[[Value]]') || has(desc, '[[Writable]]'))) {\n\t\t\tthrow new TypeError('Invalid property descriptor. Cannot both specify accessors and a value or writable attribute');\n\t\t}\n\t\treturn desc;\n\t}\n};\n\nmodule.exports = ES5;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nvar isPrimitive = require('./helpers/isPrimitive');\n\nvar isCallable = require('is-callable');\n\n// https://es5.github.io/#x8.12\nvar ES5internalSlots = {\n\t'[[DefaultValue]]': function (O, hint) {\n\t\tvar actualHint = hint || (toStr.call(O) === '[object Date]' ? String : Number);\n\n\t\tif (actualHint === String || actualHint === Number) {\n\t\t\tvar methods = actualHint === String ? ['toString', 'valueOf'] : ['valueOf', 'toString'];\n\t\t\tvar value, i;\n\t\t\tfor (i = 0; i < methods.length; ++i) {\n\t\t\t\tif (isCallable(O[methods[i]])) {\n\t\t\t\t\tvalue = O[methods[i]]();\n\t\t\t\t\tif (isPrimitive(value)) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow new TypeError('No default value');\n\t\t}\n\t\tthrow new TypeError('invalid [[DefaultValue]] hint supplied');\n\t}\n};\n\n// https://es5.github.io/#x9\nmodule.exports = function ToPrimitive(input, PreferredType) {\n\tif (isPrimitive(input)) {\n\t\treturn input;\n\t}\n\treturn ES5internalSlots['[[DefaultValue]]'](input, PreferredType);\n};\n","'use strict';\n\nvar has = require('has');\nvar regexExec = RegExp.prototype.exec;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar tryRegexExecCall = function tryRegexExec(value) {\n\ttry {\n\t\tvar lastIndex = value.lastIndex;\n\t\tvalue.lastIndex = 0;\n\n\t\tregexExec.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\tvalue.lastIndex = lastIndex;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar regexClass = '[object RegExp]';\nvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\nmodule.exports = function isRegex(value) {\n\tif (!value || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\tif (!hasToStringTag) {\n\t\treturn toStr.call(value) === regexClass;\n\t}\n\n\tvar descriptor = gOPD(value, 'lastIndex');\n\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\tif (!hasLastIndexDataProperty) {\n\t\treturn false;\n\t}\n\n\treturn tryRegexExecCall(value);\n};\n","'use strict';\n\nvar requirePromise = require('./requirePromise');\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimPromiseFinally() {\n\trequirePromise();\n\n\tvar polyfill = getPolyfill();\n\tdefine(Promise.prototype, { 'finally': polyfill }, {\n\t\t'finally': function testFinally() {\n\t\t\treturn Promise.prototype['finally'] !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","/**\n * Default options.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Function} [createWebSocket=url => new WebSocket(url)] - custom function for WebSocket construction.\n  *\n * @property {Function} [packMessage=noop] - packs message for sending. For example, `data => JSON.stringify(data)`.\n *\n * @property {Function} [unpackMessage=noop] - unpacks received message. For example, `data => JSON.parse(data)`.\n *\n * @property {Function} [attachRequestId=noop] - injects request id into data.\n * For example, `(data, requestId) => Object.assign({requestId}, data)`.\n *\n * @property {Function} [extractRequestId=noop] - extracts request id from received data.\n * For example, `data => data.requestId`.\n *\n * @property {Function} [extractMessageData=event => event.data] - extracts data from event object.\n *\n * @property {Number} timeout=0 - timeout for opening connection and sending messages.\n *\n * @property {Number} connectionTimeout=0 - special timeout for opening connection, by default equals to `timeout`.\n *\n * @defaults\n * please see [options.js](https://github.com/vitalets/websocket-as-promised/blob/master/src/options.js)\n */\n\nmodule.exports = {\n  /**\n   * See {@link Options.createWebSocket}\n   *\n   * @param {String} url\n   * @returns {WebSocket}\n   */\n  createWebSocket: url => new WebSocket(url),\n\n  /**\n   * See {@link Options.packMessage}\n   *\n   * @param {*} data\n   * @returns {String|ArrayBuffer|Blob}\n   */\n  packMessage: null,\n\n  /**\n   * See {@link Options.unpackMessage}\n   *\n   * @param {String|ArrayBuffer|Blob} data\n   * @returns {*}\n   */\n  unpackMessage: null,\n\n  /**\n   * See {@link Options.attachRequestId}\n   *\n   * @param {*} data\n   * @param {String|Number} requestId\n   * @returns {*}\n   */\n  attachRequestId: null,\n\n  /**\n   * See {@link Options.extractRequestId}\n   *\n   * @param {*} data\n   * @returns {String|Number|undefined}\n   */\n  extractRequestId: null,\n\n  /**\n   * See {@link Options.extractMessageData}\n   *\n   * @param {*} event\n   * @returns {*}\n   */\n  extractMessageData: event => event.data,\n\n  /**\n   * See {@link Options.timeout}\n   */\n  timeout: 0,\n\n  /**\n   * See {@link Options.connectionTimeout}\n   */\n  connectionTimeout: 0,\n};\n","\nexports.throwIf = (condition, message) => {\n  if (condition) {\n    throw new Error(message);\n  }\n};\n"],"sourceRoot":""}