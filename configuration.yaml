###################################################
#                                                 #
#     Home Assistant Main Configuration File      #
#                                                 #
###################################################

homeassistant:
  name: !secret name
  temperature_unit: C
  time_zone: !secret timezone
  latitude: !secret latitude
  longitude: !secret longitude
  unit_system: metric
  elevation: 680
  packages: !include_dir_named packages
  customize: !include_dir_merge_named configuration/customize/
  auth_providers:
    - type: trusted_networks
      trusted_networks:
        - 192.168.1.1
    - type: homeassistant


#  whitelist_external_dirs:
#    - /config
#    - /config/tmp
#    - /config/backup/hass


# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

###################################################
#                                                 #
#                     lovelace                    #
#                                                 #
###################################################
lovelace:
  mode: storage

# Uncomment this if you are using SSL/TLS, running in Docker container, etc.
# http:
#   base_url: example.duckdns.org:8123

# Text to speech
tts:
  - platform: google_translate

group: !include groups.yaml
automation: !include_dir_merge_list configuration/automations/
script: !include scripts.yaml
scene: !include scenes.yaml
sensor: !include_dir_merge_list configuration/sensor/
zone: !include zones.yaml
notify: !include configuration/notify/notify.yaml
input_boolean: !include configuration/input_boolean.yaml
docker_monitor: !include configuration/docker_monitor.yaml


panel_iframe:
  dash:
    title: Node red Dash
    url: http://192.168.1.138:1880/endpoint/ui

####################################################
#                                                  #
#                    Telegram Bot                  #
#                                                  #
####################################################

#telegram_bot:
#  - platform: polling
#    api_key: !secret TelegramBotApiKey
#    allowed_chat_ids:
#      - !secret telegram_israel


####################################################
#                                                  #
#                      darksky                     #
#                                                  #
####################################################

## Weather Dark Sky
weather:
  - platform: darksky
    mode: daily
    api_key: !secret darksky_api


# Example configuration.yaml entry
device_tracker:
  - platform: linksys_smart
    host: 192.168.1.1


####################################################
#                                                  #
#             Check Internet speed                 #
#                                                  #
####################################################
# Example configuration.yaml entry
speedtestdotnet:
  scan_interval:
    minutes: 30
  monitored_conditions:
    - ping
    - download
    - upload


####################################################
#                                                  #
#                    Switcher V2                   #
#                                                  #
####################################################

#switcher_kis:
#  phone_id: 0000
#  device_id: !secret switcher_device_id
#  device_password: 00000000

switcher_aio:
  phone_id: !secret switcher_phone_id
  device_id: !secret switcher_device_id
  device_password: !secret switcher_password
  create_view: true
  create_groups: true
  schedules_scan_interval:
    minutes: 5

####################################################
#                                                  #
#                    Media Player                  #
#                                                  #
####################################################

#media_player:
#  - platform: cast
#
#input_select:
#  radio_station:
#    name: 'Select Radio Station:'
#    options:
#      - GalGalatz
#      - Galatz
#      - Radius 100FM
#      - Echo 99FM
#      - Kan 88FM
#      - 103FM
#      - Lev Hamedina 91FM
#      - Reshet Gimel
#      - Radio Darom
#      - Kol Hayam Haadom 102FM
#    icon: mdi:radio
#  chromecast_radio:
#    name: 'Select Speakers:'
#    options:
#      - Livingroom
#      - Everywhere
#    initial: Everywhere
#    icon: mdi:speaker-wireless


####################################################
#                                                  #
#                    Air Condition                 #
#                                                  #
####################################################

smartir:

switch:
  - platform: broadlink
    host: 192.168.1.121
    mac: !secret broadlink_mac_121

  - platform: broadlink
    host: 192.168.1.123
    mac: !secret broadlink_mac_121

  - platform: broadlink
    host: 192.168.1.125
    mac: !secret broadlink_mac_121

  - platform: rest
    resource: http://127.0.0.1:8126/container/addon_a0d7b954_nodered
    name: nodered
    body_on: '{"state": "start"}'
    body_off: '{"state": "stop"}'
    is_on_template: '{{ value_json is not none and value_json.state == "running" }}'

  - platform: rest
    resource: http://127.0.0.1:8126/container/addon_core_deconz
    name: deconz
    body_on: '{"state": "start"}'
    body_off: '{"state": "stop"}'
    is_on_template: '{{ value_json is not none and value_json.state == "running" }}'

  - platform: rest
    resource: http://127.0.0.1:8126/container/duplicati
    name: duplicati
    body_on: '{"state": "start"}'
    body_off: '{"state": "stop"}'
    is_on_template: '{{ value_json is not none and value_json.state == "running" }}'

climate:
  - platform: smartir
    name: Salon AC
    unique_id: salon_ac
    device_code: 8881
    controller_data: 192.168.1.123
    temperature_sensor: sensor.tmprtvrh_slvn
    humidity_sensor: sensor.tmprtvrh_slvn_2
    power_sensor: binary_sensor.ac_salon_close_open_sensor

  - platform: smartir
    name: Horim AC
    unique_id: horim_ac
    device_code: 8882
    controller_data: 192.168.1.121
    temperature_sensor: sensor.tmprtvrh_hvrym
    humidity_sensor: sensor.tmprtvrh_hvrym_2
    power_sensor: binary_sensor.ac_horim_close_open_sensor

  - platform: smartir
    name: Kids AC
    unique_id: kids_ac
    device_code: 8882
    controller_data: 192.168.1.125
    power_sensor: binary_sensor.ac_kids_close_open_sensor


####################################################
#                                                  #
#                    Sonoff devices                #
#                                                  #
####################################################

sonoff:
  username: !secret sonoff_user
  password: !secret sonoff_pass
  scan_interval: 60
  grace_period: 600
  api_region: 'as'
  entity_prefix: True
  debug: False